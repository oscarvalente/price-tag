!function(){"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let t,n,r;const i={WATCHED:"WATCHED",NOT_FOUND:"NOT_FOUND",INCREASED:"INCREASED",DECREASED:"DECREASED",FIXED:"FIXED"},c=14e3;function s(c){const s=c.map(t=>(function(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(n){e(t,n,r[n])})}return t})({},t,{dateTime:function(e){const t=new Date(e);return`${t.toLocaleDateString()} ${t.toLocaleTimeString()}`}(t.timestamp),isWatched:t.statuses.includes(i.WATCHED),isNotFound:t.statuses.includes(i.NOT_FOUND),isHigher:t.statuses.includes(i.INCREASED),isLower:t.statuses.includes(i.DECREASED),diffPercBackground:t.diffPercentage&&t.diffPercentage>0?"red":"green"}));t.innerHTML=r({trackedItems:s}),n=document.getElementById("tracked-items-list"),function(e){const t=document.body.querySelectorAll(e);for(let e in t)if(t.hasOwnProperty(e)){const n=t[e],r=n.getAttribute("data-item-url");n.onclick=a.bind(null,r,n.parentElement)}}(".item-container .item-delete")}function a(e,t){chrome.runtime.sendMessage({type:"TRACKED_ITEMS.UNFOLLOW",payload:{url:e}},function(e,t){t&&(n.removeChild(e),0===n.children.length&&o())}.bind(null,t))}function o(){chrome.runtime.sendMessage({type:"TRACKED_ITEMS.GET"},s)}Handlebars.registerHelper("diffPercentage",e=>{let t=parseInt(e,10),n=110,r=180;return(t>=10||t<=-10)&&(n=50,r=175),(t>=100||t<=-100)&&(n=60,r=170),t>0&&(t=`+${t}`),new Handlebars.SafeString(`<text x="${n}" y="310" font-family="Verdana" font-weight="bold" font-size="${r}" fill="#fff1cb" letter-spacing="-10">\n                ${t}%\n            </text>`)}),Handlebars.registerHelper("targetPrice",function(){return this.price!==this.currentPrice?new Handlebars.SafeString(`<span class="item-label target-price" title="Price the last time you marked it">${this.price}</span>`):""}),t=document.getElementById("tracked-items-container"),r=function(e){const t=document.getElementById(e).innerHTML;return Handlebars.compile(t)}("items-list"),o(),setInterval(o,c)}();
