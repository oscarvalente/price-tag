{"version":3,"file":"background.js","sources":["../node_modules/lodash/_freeGlobal.js","../node_modules/lodash/_root.js","../node_modules/lodash/_Symbol.js","../node_modules/lodash/_getRawTag.js","../node_modules/lodash/_objectToString.js","../node_modules/lodash/_baseGetTag.js","../node_modules/lodash/isObject.js","../node_modules/lodash/isFunction.js","../node_modules/lodash/_coreJsData.js","../node_modules/lodash/_isMasked.js","../node_modules/lodash/_toSource.js","../node_modules/lodash/_baseIsNative.js","../node_modules/lodash/_getValue.js","../node_modules/lodash/_getNative.js","../node_modules/lodash/_nativeCreate.js","../node_modules/lodash/_hashClear.js","../node_modules/lodash/_hashDelete.js","../node_modules/lodash/_hashGet.js","../node_modules/lodash/_hashHas.js","../node_modules/lodash/_hashSet.js","../node_modules/lodash/_Hash.js","../node_modules/lodash/_listCacheClear.js","../node_modules/lodash/eq.js","../node_modules/lodash/_assocIndexOf.js","../node_modules/lodash/_listCacheDelete.js","../node_modules/lodash/_listCacheGet.js","../node_modules/lodash/_listCacheHas.js","../node_modules/lodash/_listCacheSet.js","../node_modules/lodash/_ListCache.js","../node_modules/lodash/_Map.js","../node_modules/lodash/_mapCacheClear.js","../node_modules/lodash/_isKeyable.js","../node_modules/lodash/_getMapData.js","../node_modules/lodash/_mapCacheDelete.js","../node_modules/lodash/_mapCacheGet.js","../node_modules/lodash/_mapCacheHas.js","../node_modules/lodash/_mapCacheSet.js","../node_modules/lodash/_MapCache.js","../node_modules/lodash/_setCacheAdd.js","../node_modules/lodash/_setCacheHas.js","../node_modules/lodash/_SetCache.js","../node_modules/lodash/_baseFindIndex.js","../node_modules/lodash/_baseIsNaN.js","../node_modules/lodash/_strictIndexOf.js","../node_modules/lodash/_baseIndexOf.js","../node_modules/lodash/_arrayIncludes.js","../node_modules/lodash/_arrayIncludesWith.js","../node_modules/lodash/_cacheHas.js","../node_modules/lodash/_Set.js","../node_modules/lodash/noop.js","../node_modules/lodash/_setToArray.js","../node_modules/lodash/_createSet.js","../node_modules/lodash/_baseUniq.js","../node_modules/lodash/uniq.js","../src/config/sort-tracked-items.js","../src/config/background.js","../src/core/factories/state.js","../src/core/entities/item.js","../src/utils/sort-tracked-items.js","../src/utils/dom.js","../src/utils/lang.js","../background.js"],"sourcesContent":["/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","var getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n","var nativeCreate = require('./_nativeCreate');\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nmodule.exports = hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = hashDelete;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nmodule.exports = hashGet;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nmodule.exports = hashHas;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nmodule.exports = hashSet;\n","var hashClear = require('./_hashClear'),\n    hashDelete = require('./_hashDelete'),\n    hashGet = require('./_hashGet'),\n    hashHas = require('./_hashHas'),\n    hashSet = require('./_hashSet');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nmodule.exports = Hash;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nmodule.exports = listCacheClear;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","var eq = require('./eq');\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nmodule.exports = listCacheDelete;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nmodule.exports = listCacheGet;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nmodule.exports = listCacheHas;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nmodule.exports = listCacheSet;\n","var listCacheClear = require('./_listCacheClear'),\n    listCacheDelete = require('./_listCacheDelete'),\n    listCacheGet = require('./_listCacheGet'),\n    listCacheHas = require('./_listCacheHas'),\n    listCacheSet = require('./_listCacheSet');\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nmodule.exports = ListCache;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n","var Hash = require('./_Hash'),\n    ListCache = require('./_ListCache'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapCacheClear;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nmodule.exports = isKeyable;\n","var isKeyable = require('./_isKeyable');\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nmodule.exports = getMapData;\n","var getMapData = require('./_getMapData');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = mapCacheDelete;\n","var getMapData = require('./_getMapData');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nmodule.exports = mapCacheGet;\n","var getMapData = require('./_getMapData');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nmodule.exports = mapCacheHas;\n","var getMapData = require('./_getMapData');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nmodule.exports = mapCacheSet;\n","var mapCacheClear = require('./_mapCacheClear'),\n    mapCacheDelete = require('./_mapCacheDelete'),\n    mapCacheGet = require('./_mapCacheGet'),\n    mapCacheHas = require('./_mapCacheHas'),\n    mapCacheSet = require('./_mapCacheSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nmodule.exports = MapCache;\n","/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nmodule.exports = setCacheAdd;\n","/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nmodule.exports = setCacheHas;\n","var MapCache = require('./_MapCache'),\n    setCacheAdd = require('./_setCacheAdd'),\n    setCacheHas = require('./_setCacheHas');\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nmodule.exports = SetCache;\n","/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = baseFindIndex;\n","/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\nmodule.exports = baseIsNaN;\n","/**\n * A specialized version of `_.indexOf` which performs strict equality\n * comparisons of values, i.e. `===`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction strictIndexOf(array, value, fromIndex) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = strictIndexOf;\n","var baseFindIndex = require('./_baseFindIndex'),\n    baseIsNaN = require('./_baseIsNaN'),\n    strictIndexOf = require('./_strictIndexOf');\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  return value === value\n    ? strictIndexOf(array, value, fromIndex)\n    : baseFindIndex(array, baseIsNaN, fromIndex);\n}\n\nmodule.exports = baseIndexOf;\n","var baseIndexOf = require('./_baseIndexOf');\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  var length = array == null ? 0 : array.length;\n  return !!length && baseIndexOf(array, value, 0) > -1;\n}\n\nmodule.exports = arrayIncludes;\n","/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arrayIncludesWith;\n","/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nmodule.exports = cacheHas;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nmodule.exports = Set;\n","/**\n * This method returns `undefined`.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Util\n * @example\n *\n * _.times(2, _.noop);\n * // => [undefined, undefined]\n */\nfunction noop() {\n  // No operation performed.\n}\n\nmodule.exports = noop;\n","/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nmodule.exports = setToArray;\n","var Set = require('./_Set'),\n    noop = require('./noop'),\n    setToArray = require('./_setToArray');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Creates a set object of `values`.\n *\n * @private\n * @param {Array} values The values to add to the set.\n * @returns {Object} Returns the new set.\n */\nvar createSet = !(Set && (1 / setToArray(new Set([,-0]))[1]) == INFINITY) ? noop : function(values) {\n  return new Set(values);\n};\n\nmodule.exports = createSet;\n","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    cacheHas = require('./_cacheHas'),\n    createSet = require('./_createSet'),\n    setToArray = require('./_setToArray');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n */\nfunction baseUniq(array, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      length = array.length,\n      isCommon = true,\n      result = [],\n      seen = result;\n\n  if (comparator) {\n    isCommon = false;\n    includes = arrayIncludesWith;\n  }\n  else if (length >= LARGE_ARRAY_SIZE) {\n    var set = iteratee ? null : createSet(array);\n    if (set) {\n      return setToArray(set);\n    }\n    isCommon = false;\n    includes = cacheHas;\n    seen = new SetCache;\n  }\n  else {\n    seen = iteratee ? [] : result;\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var seenIndex = seen.length;\n      while (seenIndex--) {\n        if (seen[seenIndex] === computed) {\n          continue outer;\n        }\n      }\n      if (iteratee) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n    else if (!includes(seen, computed, comparator)) {\n      if (seen !== result) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseUniq;\n","var baseUniq = require('./_baseUniq');\n\n/**\n * Creates a duplicate-free version of an array, using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons, in which only the first occurrence of each element\n * is kept. The order of result values is determined by the order they occur\n * in the array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * _.uniq([2, 1, 2]);\n * // => [2, 1]\n */\nfunction uniq(array) {\n  return (array && array.length) ? baseUniq(array) : [];\n}\n\nmodule.exports = uniq;\n","const TIME = \"TIME\";\nconst CURRENT_PRICE = \"CURRENT_PRICE\";\n\nexport {\n    TIME,\n    CURRENT_PRICE\n};\n","const PRICE_CHECKING_INTERVAL = 180000;\nconst SYNCHING_INTERVAL = 120000;\nconst MAX_UNDO_REMOVED_ITEMS = 10;\nconst UNDO_REMOVED_ITEMS_TIMEOUT = 120000;\n\nexport {\n    PRICE_CHECKING_INTERVAL,\n    SYNCHING_INTERVAL,\n    MAX_UNDO_REMOVED_ITEMS,\n    UNDO_REMOVED_ITEMS_TIMEOUT\n};\n","class StateFactory {\n    static createState(sortItemByType) {\n        return {\n            recordActive: false,\n            notifications: {},\n            notificationsCounter: 0,\n            autoSaveEnabled: false,\n            isPriceUpdateEnabled: false,\n            selection: null,\n            isSimilarElementHighlighted: false,\n            originalBackgroundColor: null,\n            isCurrentPageTracked: false,\n            faviconURL: null,\n            _faviconURLMap: {},\n            currentURL: null,\n            canonicalURL: null,\n            browserURL: null,\n            domain: null,\n            _sortItemsBy: sortItemByType,\n            _undoRemovedItems: [],\n            _undoRemovedItemsResetTask: null\n        };\n    }\n\n    static toggleRecord(state) {\n        return {\n            ...state,\n            recordActive: !state.recordActive\n        }\n    }\n\n    static disableRecord(state) {\n        return {\n            ...state,\n            recordActive: false\n        }\n    }\n\n    static updateCurrentDomain(state, domain) {\n        return {\n            ...state,\n            domain\n        };\n    }\n\n    static updateCurrentURL(state, currentURL) {\n        return {\n            ...state,\n            currentURL\n        };\n    }\n\n    static updateCanonicalURL(state, canonicalURL) {\n        return {\n            ...state,\n            canonicalURL\n        };\n    }\n\n    static updateBrowserURL(state, browserURL) {\n        return {\n            ...state,\n            browserURL\n        };\n    }\n\n    static enableCurrentPageTracked(state) {\n        return {\n            ...state,\n            isCurrentPageTracked: true\n        };\n    }\n\n    static disableCurrentPageTracked(state) {\n        return {\n            ...state,\n            isCurrentPageTracked: false\n        };\n    }\n\n    static updateFaviconURL(state, faviconURL) {\n        return {\n            ...state,\n            faviconURL\n        };\n    }\n\n    static updateFaviconURLMapItem(state, tabId, faviconURL) {\n        return {\n            ...state,\n            _faviconURLMap: {\n                ...state._faviconURLMap,\n                [tabId]: faviconURL\n            }\n        };\n    }\n\n    static enableAutoSave(state, selection) {\n        selection = selection || state.selection;\n        return {\n            ...state,\n            autoSaveEnabled: true,\n            selection\n        };\n    }\n\n    static disableAutoSave(state) {\n        return {\n            ...state,\n            autoSaveEnabled: false\n        };\n    }\n\n    static enablePriceUpdate(state, selection) {\n        return {\n            ...state,\n            isPriceUpdateEnabled: true,\n            selection\n        };\n    }\n\n    static disablePriceUpdate(state) {\n        return {\n            ...state,\n            isPriceUpdateEnabled: false\n        };\n    }\n\n    static setSelectionInfo(state, selection, price, faviconURL, faviconAlt) {\n        return {\n            ...state,\n            selection,\n            price,\n            faviconURL,\n            faviconAlt\n        };\n    }\n\n    static setSimilarElementHighlight(state, isSimilarElementHighlighted, originalBackgroundColor) {\n        return {\n            ...state,\n            isSimilarElementHighlighted,\n            originalBackgroundColor\n        };\n    }\n\n    static incrementNotificationsCounter(state) {\n        const notificationsCounter = state.notificationsCounter + 1;\n        return {\n            ...state,\n            notificationsCounter\n        }\n    }\n\n    static deleteNotificationsItem(state, notificationId) {\n        const newState = {...state};\n        delete newState.notifications[notificationId];\n        return newState;\n    }\n\n    static updateNotificationsItem(state, notificationId, notificationState) {\n        return {\n            ...state,\n            notifications: {\n                ...state.notifications,\n                [notificationId]: notificationState\n            }\n        };\n    }\n\n    static updateSortItemsBy(state, _sortItemsBy) {\n        return {\n            ...state,\n            _sortItemsBy\n        };\n    }\n\n    static addUndoRemovedItem(state, url, {timestamp}, maxItems) {\n        const itemRef = {url, timestamp};\n        const _undoRemovedItemsClone = [...state._undoRemovedItems];\n        _undoRemovedItemsClone.unshift(itemRef);\n        const _undoRemovedItems = _undoRemovedItemsClone.slice(0, maxItems);\n\n        return {\n            ...state,\n            _undoRemovedItems\n        };\n    }\n\n    static getUndoRemovedItemsHead(state) {\n        return state._undoRemovedItems[0];\n    }\n\n    static removeUndoRemovedItem(state) {\n        const _undoRemovedItems = [...state._undoRemovedItems];\n        _undoRemovedItems.shift();\n\n        return {\n            ...state,\n            _undoRemovedItems\n        };\n    }\n\n    static resetUndoRemovedItems(state) {\n        return {\n            ...state,\n            _undoRemovedItems: []\n        };\n    }\n\n    static setUndoRemovedItemsResetTask(state, task) {\n        return {\n            ...state,\n            _undoRemovedItemsResetTask: task\n        };\n    }\n\n    static toStorageStateFormat(state) {\n        return Object.keys(state).reduce((newState, domain) => {\n            return {\n                ...newState,\n                [domain]: JSON.stringify(state[domain])\n            }\n        }, {});\n    }\n}\n\nexport default StateFactory;\n","import uniq from \"lodash/uniq\";\n\nconst ITEM_STATUS = {\n    WATCHED: \"WATCHED\",\n    NOT_FOUND: \"NOT_FOUND\",\n    INCREASED: \"INCREASED\",\n    DECREASED: \"DECREASED\",\n    ACK_DECREASE: \"ACK_DECREASE\",\n    ACK_INCREASE: \"ACK_INCREASE\",\n    FIXED: \"FIXED\"\n};\n\nclass Item {\n    constructor(selection, price, previousPrice, faviconURL, faviconAlt, statuses, diffPercentage = 0) {\n        this.selection = selection;\n        this.price = price;\n        this.currentPrice = price;\n        this.startingPrice = price;\n        this.previousPrice = !previousPrice ? null : previousPrice;\n        this.faviconURL = faviconURL;\n        this.faviconAlt = faviconAlt;\n        this.timestamp = new Date().getTime();\n        this.lastUpdateTimestamp = new Date().getTime();\n        this.statuses = statuses;\n        this.diffPercentage = diffPercentage;\n    }\n\n    updateCurrentPrice(newPrice) {\n        this.previousPrice = this.currentPrice;\n        this.currentPrice = newPrice;\n\n        return this.updateDiffPercentage();\n    }\n\n    updateDiffPercentage() {\n        const diff = Math.abs(this.currentPrice - this.price) * 100 / this.price;\n        const diffPerc = parseFloat(diff.toFixed(2));\n        let diffPercentage = null;\n        if (diffPerc) {\n            diffPercentage = this.currentPrice > this.price ?\n                +diffPerc :\n                -diffPerc;\n\n            if (diffPercentage > 0 && diffPercentage < 1) {\n                diffPercentage = Math.ceil(diffPercentage);\n            } else if (diffPercentage > -1 && diffPercentage < 0) {\n                diffPercentage = Math.floor(diffPercentage);\n            }\n        }\n\n        this.diffPercentage = diffPercentage;\n    }\n\n    updateTrackStatus(item, newPrice, statusesToAdd, statusesToRemove, forceStartingPrice = false) {\n        if (!statusesToAdd) {\n            statusesToAdd = [];\n        }\n\n        if (!statusesToRemove) {\n            statusesToRemove = [];\n        }\n\n        this.statuses = uniq([...this.removeStatuses(statusesToRemove), ...statusesToAdd]);\n        this.lastUpdateTimestamp = new Date().getTime();\n\n        if (forceStartingPrice) {\n            this.startingPrice = this.price;\n        }\n\n        if (newPrice) {\n            this.price = newPrice;\n        }\n    }\n\n    removeStatuses(statusesToRemove = []) {\n        return statusesToRemove.length > 0 && this.statuses.length > 0 ?\n            this.statuses.filter(status => !statusesToRemove.includes(status)) :\n            this.statuses;\n    }\n\n    isWatched() {\n        return this.statuses.includes(ITEM_STATUS.WATCHED);\n    }\n\n    isNotFound() {\n        return this.statuses.includes(ITEM_STATUS.NOT_FOUND);\n    }\n\n    hasAcknowledgeDecrease() {\n        return this.statuses.includes(ITEM_STATUS.ACK_DECREASE);\n    }\n\n    hasAcknowledgeIncrease() {\n        return this.statuses.includes(ITEM_STATUS.ACK_INCREASE);\n    }\n}\n\nexport default Item;\n","function sortItemsByTime({timestamp: tsA}, {timestamp: tsB}) {\n    return tsA - tsB;\n}\n\nfunction sortItemsByCurrentPrice({currentPrice: cpA}, {currentPrice: cpB}) {\n    return cpA - cpB;\n}\n\nexport default {\n    TIME: sortItemsByTime,\n    CURRENT_PRICE: sortItemsByCurrentPrice\n};\n","function createHTMLTemplate(html) {\n    const template = document.createElement(\"template\");\n    template.innerHTML = html.trim();\n    return template.content;\n}\n\nfunction getCanonicalPathFromSource(source) {\n    const canonicalElement = source.querySelector(\"link[rel=\\\"canonical\\\"]\");\n    return canonicalElement && canonicalElement.getAttribute(\"href\");\n}\n\nexport {\n    createHTMLTemplate,\n    getCanonicalPathFromSource\n};\n","function toPrice(price) {\n    const priceNumber = parseFloat(price.replace(\",\", \".\"));\n    const formattedPrice = priceNumber.toFixed(2);\n    return parseFloat(formattedPrice);\n}\n\nexport {\n    toPrice\n};\n","import uniq from \"lodash/uniq\";\nimport * as SORT_BY_TYPES from \"./src/config/sort-tracked-items\";\nimport {TIME as SORT_ITEMS_BY_TIME} from \"./src/config/sort-tracked-items\";\nimport {PRICE_CHECKING_INTERVAL, SYNCHING_INTERVAL, MAX_UNDO_REMOVED_ITEMS, UNDO_REMOVED_ITEMS_TIMEOUT}\n    from \"./src/config/background\";\nimport StateFactory from \"./src/core/factories/state\";\nimport Item from \"./src/core/entities/item\";\nimport sortTrackedItemsBy from \"./src/utils/sort-tracked-items\";\nimport {createHTMLTemplate, getCanonicalPathFromSource} from \"./src/utils/dom\";\nimport {toPrice} from \"./src/utils/lang\";\n\nlet State = StateFactory.createState(SORT_ITEMS_BY_TIME);\n\nconst DEFAULT_ICON = \"assets/icon_48.png\";\nconst TRACKED_ITEM_ICON = \"assets/icon_active_48.png\";\nconst DEFAULT_TITLE = \"Price Tag\";\nconst TRACKED_ITEM_TITLE = \"Price Tag - This item is being tracked\";\n\nconst ICONS = {\n    PRICE_UPDATE: \"./assets/time-is-money.svg\",\n    PRICE_NOT_FOUND: \"./assets/time.svg\",\n    PRICE_FIX: \"./assets/coin.svg\"\n};\n\nconst MATCHES = {\n    PRICE: /((?:\\d+[.,])?\\d+(?:[.,]\\d+)?)/,\n    HOSTNAME: /https?:\\/\\/([\\w.]+)\\/*/,\n    DOMAIN: /^([\\w-]+\\.)+[\\w-]+\\w$/,\n    URL: /^https?:\\/\\/([\\w-]+\\.)+[\\w-]+\\w(\\/[\\w-=.]+)+\\/?(\\?([\\w]+=?[\\w-%!@()\\\\[\"#\\]]+&?)*)?/,\n    CAPTURE: {\n        DOMAIN_IN_URL: /https?:\\/\\/([\\w.]+)\\/*/,\n        HOSTNAME_AND_PATH: /^https?:\\/\\/((?:[\\w-]+\\.)+[\\w-]+\\w(?:\\/[\\w-=.]+)+\\/?)/,\n        PROTOCOL_HOSTNAME_AND_PATH: /^(https?:\\/\\/(?:[\\w-]+\\.)+[\\w-]+\\w(?:\\/[\\w-=.]+)+\\/?)/\n    }\n};\n\nconst ITEM_STATUS = {\n    WATCHED: \"WATCHED\",\n    NOT_FOUND: \"NOT_FOUND\",\n    INCREASED: \"INCREASED\",\n    DECREASED: \"DECREASED\",\n    ACK_DECREASE: \"ACK_DECREASE\",\n    ACK_INCREASE: \"ACK_INCREASE\",\n    FIXED: \"FIXED\"\n};\n\nconst ALL_ITEM_STATUSES = Object.values(ITEM_STATUS);\n\nfunction removeStatuses(item, statusesToRemove = []) {\n    return statusesToRemove.length > 0 && item.statuses.length > 0 ?\n        item.statuses.filter(status => !statusesToRemove.includes(status)) :\n        item.statuses;\n}\n\nfunction updateItemCurrentPrice(item, newPrice) {\n    const previousPrice = item.currentPrice;\n\n    const newItem = {\n        ...item,\n        previousPrice,\n        currentPrice: newPrice\n    };\n\n    return updateItemDiffPercentage(newItem);\n}\n\nfunction updateItemDiffPercentage(item) {\n    const diff = Math.abs(item.currentPrice - item.price) * 100 / item.price;\n    const diffPerc = parseFloat(diff.toFixed(2));\n    let diffPercentage = null;\n    if (diffPerc) {\n        diffPercentage = item.currentPrice > item.price ?\n            +diffPerc :\n            -diffPerc;\n\n        if (diffPercentage > 0 && diffPercentage < 1) {\n            diffPercentage = Math.ceil(diffPercentage);\n        } else if (diffPercentage > -1 && diffPercentage < 0) {\n            diffPercentage = Math.floor(diffPercentage);\n        }\n    }\n\n    item.diffPercentage = diffPercentage;\n\n    return item;\n}\n\nfunction updateItemTrackStatus(item, newPrice, statusesToAdd, statusesToRemove, forceStartingPrice = false) {\n    if (!statusesToAdd) {\n        statusesToAdd = [];\n    }\n\n    if (!statusesToRemove) {\n        statusesToRemove = [];\n    }\n\n    const statuses = uniq([...removeStatuses(item, statusesToRemove), ...statusesToAdd]);\n    const updatedItem = {\n        ...item,\n        statuses,\n        lastUpdateTimestamp: new Date().getTime()\n    };\n\n    if (forceStartingPrice) {\n        updatedItem.startingPrice = item.price;\n    }\n\n    if (newPrice) {\n        updatedItem.price = newPrice;\n    }\n\n    return updatedItem;\n}\n\nfunction isWatched(item) {\n    return item.statuses.includes(ITEM_STATUS.WATCHED);\n}\n\nfunction isNotFound(item) {\n    return item.statuses.includes(ITEM_STATUS.NOT_FOUND);\n}\n\nfunction hasAcknowledgeDecrease(item) {\n    return item.statuses.includes(ITEM_STATUS.ACK_DECREASE);\n}\n\nfunction hasAcknowledgeIncrease(item) {\n    return item.statuses.includes(ITEM_STATUS.ACK_INCREASE);\n}\n\nfunction onConfirmURLForCreateItemAttempt(tabId, domain, url, selection, price, faviconURL, faviconAlt, callback) {\n    const modalElementId = \"price-tag--url-confirmation\";\n    chrome.tabs.sendMessage(tabId, {\n        type: \"CONFIRMATION_DISPLAY.CREATE\",\n        payload: {elementId: modalElementId}\n    }, ({status}) => {\n        if (status === 1) {\n            const payload = buildURLConfirmationPayload(State.canonicalURL, State.browserURL, domain);\n            chrome.tabs.sendMessage(tabId, {\n                type: \"CONFIRMATION_DISPLAY.LOAD\",\n                payload\n            }, ({status, index}) => {\n                chrome.tabs.sendMessage(tabId, {\n                    type: \"CONFIRMATION_DISPLAY.REMOVE\",\n                    payload: {elementId: modalElementId}\n                });\n\n                switch (status) {\n                    case 1:\n                        switch (index) {\n                            case 0:\n                                // said Yes, can use canonical and remember this option\n                                chrome.storage.local.get([domain], result => {\n                                    const domainState = result && result[domain] && JSON.parse(result[domain]) || {};\n                                    domainState._canUseCanonical = true;\n                                    chrome.storage.local.set({[domain]: JSON.stringify(domainState)});\n                                    State = StateFactory.updateCurrentURL(State, State.canonicalURL);\n                                    callback(true, true);\n                                });\n                                break;\n                            case 1:\n                                // said Yes, but use canonical just this time\n                                State = StateFactory.updateCurrentURL(State, State.canonicalURL);\n                                callback(true, true);\n                                break;\n                            case 2:\n                                // said No, use browser URL and remember this option\n                                chrome.storage.local.get([domain], result => {\n                                    const domainState = result && result[domain] && JSON.parse(result[domain]) || {};\n                                    domainState._canUseCanonical = false;\n                                    chrome.storage.local.set({[domain]: JSON.stringify(domainState)});\n                                    State = StateFactory.updateCurrentURL(State, State.browserURL);\n                                    callback(true, false);\n                                });\n                                break;\n                            case 3:\n                                // said No, use browser URL but ask again\n                                State = StateFactory.updateCurrentURL(State, State.browserURL);\n                                callback(true, false);\n                                break;\n                            default:\n                                // cannot recognize this modal button click\n                                callback(false);\n                                break;\n                        }\n                        break;\n                    case 2:\n                        // close modal\n                        callback(false);\n                        break;\n                    default:\n                        callback(false);\n                        break;\n                }\n            });\n        }\n    });\n}\n\nfunction onRecordDone(tabId, payload) {\n    const {status, selection, price, faviconURL, faviconAlt} = payload;\n    const {currentURL, domain} = State;\n    if (status > 0) {\n        State = StateFactory.updateFaviconURL(State, State.faviconURL || faviconURL);\n        canDisplayURLConfirmation(State, domain, canDisplay => {\n            if (canDisplay) {\n                onConfirmURLForCreateItemAttempt(tabId, domain, currentURL, selection, price, faviconURL, faviconAlt, (canSave, useCaninocal) => {\n                    if (canSave) {\n                        const url = useCaninocal ? State.canonicalURL : State.browserURL;\n                        checkForURLSimilarity(tabId, domain, url, isToSave => {\n                            if (isToSave) {\n                                createItem(domain, url, selection, price, State.faviconURL, faviconAlt, [ITEM_STATUS.WATCHED]);\n                                updateExtensionAppearance(domain, url, true);\n                            }\n                        });\n                    }\n                });\n            } else {\n                checkForURLSimilarity(tabId, domain, currentURL, isToSave => {\n                    if (isToSave) {\n                        createItem(domain, currentURL, selection, price, State.faviconURL, faviconAlt, [ITEM_STATUS.WATCHED]);\n                        updateExtensionAppearance(domain, currentURL, true);\n                    }\n                });\n            }\n        });\n\n        State = StateFactory.disableRecord(State);\n    }\n}\n\nfunction onRecordCancel() {\n    State = StateFactory.disableRecord(State);\n}\n\nfunction onAutoSaveCheckStatus(sendResponse, {status, selection, price, faviconURL, faviconAlt} = {}) {\n    if (status >= 0) {\n        State = StateFactory.updateFaviconURL(State, State.faviconURL || faviconURL);\n        State = StateFactory.setSelectionInfo(State, selection, price, State.faviconURL, faviconAlt);\n        sendResponse(true);\n    } else {\n        sendResponse(false);\n    }\n}\n\nfunction onPriceUpdateCheckStatus(sendResponse, trackedPrice, {status, selection, price, faviconURL, faviconAlt} = {}) {\n    if (status >= 0) {\n        State = StateFactory.updateFaviconURL(State, State.faviconURL || faviconURL);\n        State = StateFactory.setSelectionInfo(State, selection, price, State.faviconURL, faviconAlt);\n        if (toPrice(price) !== trackedPrice) {\n            sendResponse(true);\n            return;\n        }\n    }\n\n    sendResponse(false);\n}\n\nfunction onSimilarElementHighlight({status, isHighlighted: isSimilarElementHighlighted, originalBackgroundColor = null}) {\n    if (status >= 0) {\n        State = StateFactory.setSimilarElementHighlight(State, isSimilarElementHighlighted, originalBackgroundColor);\n    }\n}\n\n// TODO: price becomes a class\nfunction createItem(domain, url, selection, price, faviconURL, faviconAlt, statuses, callback) {\n    chrome.storage.local.get([domain], result => {\n        const items = result && result[domain] ? JSON.parse(result[domain]) : {};\n        items[url] = new Item(selection, toPrice(price), null, faviconURL, faviconAlt, statuses);\n\n        chrome.storage.local.set({[domain]: JSON.stringify(items)}, () => {\n            State = StateFactory.disableAutoSave(State);\n            if (callback) {\n                callback();\n            }\n            // TODO: sendResponse(\"done\"); // foi gravado ou não\n        });\n    });\n}\n\nfunction canDisplayURLConfirmation(state, domain, callback) {\n    chrome.storage.local.get([domain], result => {\n        const domainState = result && result[domain] && JSON.parse(result[domain]) || null;\n        const isUseCanonicalPrefUnset = !domainState || domainState._canUseCanonical === undefined;\n        callback(isUseCanonicalPrefUnset && !!state.canonicalURL &&\n            state.canonicalURL !== state.browserURL);\n    });\n}\n\nfunction setDefaultAppearance() {\n    chrome.browserAction.setTitle({title: DEFAULT_TITLE});\n    chrome.browserAction.setIcon({path: DEFAULT_ICON});\n}\n\nfunction setTrackedItemAppearance() {\n    chrome.browserAction.setTitle({title: TRACKED_ITEM_TITLE});\n    chrome.browserAction.setIcon({path: TRACKED_ITEM_ICON});\n}\n\nfunction checkForPriceChanges() {\n    chrome.storage.local.get(null, result => {\n        for (let domain in result) {\n            if (result.hasOwnProperty(domain) && matchesDomain(domain)) {\n                const domainItems = JSON.parse(result[domain]);\n\n                for (let url in domainItems) {\n                    if (domainItems.hasOwnProperty(url) && matchesURL(url) && isWatched(domainItems[url])) {\n                        const request = new XMLHttpRequest();\n                        const {price: targetPrice, currentPrice} = domainItems[url];\n\n                        request.onload = function () {\n                            const template = createHTMLTemplate(this.response);\n                            try {\n                                let newPrice = null;\n                                const {textContent} = template.querySelector(domainItems[url].selection);\n                                if (textContent) {\n                                    const textContentMatch = textContent.match(MATCHES.PRICE);\n                                    if (textContentMatch) {\n                                        [, newPrice] = textContentMatch;\n\n                                        newPrice = toPrice(newPrice);\n\n                                        if (!targetPrice) {\n                                            domainItems[url] = updateItemTrackStatus(domainItems[url], newPrice,\n                                                [ITEM_STATUS.FIXED], [ITEM_STATUS.NOT_FOUND]);\n                                            chrome.storage.local.set({[domain]: JSON.stringify(domainItems)}, () => {\n                                                const notificationId = `TRACK.PRICE_FIXED-${State.notificationsCounter}`;\n                                                createNotification(notificationId, ICONS.PRICE_FIX, \"Fixed price\",\n                                                    `Ermm.. We've just fixed a wrongly set price to ${newPrice}`, url, url, domain);\n                                            });\n                                        } else if (newPrice < currentPrice) {\n                                            const updatedItem = updateItemCurrentPrice(domainItems[url], newPrice);\n                                            domainItems[url] = updateItemTrackStatus(updatedItem, null,\n                                                [ITEM_STATUS.DECREASED],\n                                                [ITEM_STATUS.INCREASED, ITEM_STATUS.NOT_FOUND, ITEM_STATUS.ACK_DECREASE]);\n\n                                            chrome.storage.local.set({[domain]: JSON.stringify(domainItems)}, () => {\n                                                // TODO: sendResponse(\"done\"); // foi actualizado ou não\n                                                if (newPrice < targetPrice && !hasAcknowledgeDecrease(domainItems[url])) {\n                                                    const notificationId = `TRACK.PRICE_UPDATE-${State.notificationsCounter}`;\n                                                    createNotification(notificationId, ICONS.PRICE_UPDATE, \"Lower price!!\",\n                                                        `${newPrice} (previous ${targetPrice})`, url, url, domain, ITEM_STATUS.DECREASED,\n                                                        {\n                                                            buttons: [\n                                                                {\n                                                                    title: `Keep tracking but w/ new price (${newPrice})`\n                                                                },\n                                                                {\n                                                                    title: \"Stop watching\"\n                                                                }\n                                                            ]\n                                                        });\n                                                }\n                                            });\n                                        } else if (newPrice > currentPrice) {\n                                            const updatedItem = updateItemCurrentPrice(domainItems[url], newPrice); // update current price and previous\n                                            domainItems[url] = updateItemTrackStatus(updatedItem, null,\n                                                [ITEM_STATUS.INCREASED],\n                                                [ITEM_STATUS.DECREASED, ITEM_STATUS.NOT_FOUND, ITEM_STATUS.ACK_INCREASE]);\n\n                                            chrome.storage.local.set({[domain]: JSON.stringify(domainItems)}, () => {\n                                                // TODO: sendResponse(\"done\"); // foi actualizado ou não\n\n                                                if (!hasAcknowledgeIncrease(domainItems[url])) {\n                                                    const notificationId = `TRACK.PRICE_UPDATE-${State.notificationsCounter}`;\n                                                    const notificationOptions = domainItems[url].price !== domainItems[url].previousPrice ?\n                                                        {\n                                                            buttons: [\n                                                                {\n                                                                    title: `Increase interest price to the previous (${domainItems[url].previousPrice})`\n                                                                }\n                                                            ]\n                                                        } :\n                                                        {\n                                                            buttons: []\n                                                        };\n                                                    notificationOptions.buttons.push(\n                                                        {\n                                                            title: \"Stop watching\"\n                                                        }\n                                                    );\n                                                    createNotification(notificationId, ICONS.PRICE_UPDATE, \"Price increase\",\n                                                        `${newPrice} (previous ${domainItems[url].previousPrice})`, url, url, domain, ITEM_STATUS.INCREASED,\n                                                        notificationOptions);\n                                                }\n                                            });\n                                        } else if (!isNotFound(domainItems[url])) { // NOTE: Here, price is the same\n                                            domainItems[url] = updateItemTrackStatus(domainItems[url], null,\n                                                null, [ITEM_STATUS.NOT_FOUND]);\n                                            chrome.storage.local.set({[domain]: JSON.stringify(domainItems)}, () => {\n                                                // TODO: sendResponse(\"done\"); // foi actualizado ou não\n                                            });\n                                        } else {\n                                            domainItems[url] = updateItemTrackStatus(domainItems[url], null,\n                                                null, [ITEM_STATUS.NOT_FOUND]);\n                                            chrome.storage.local.set({[domain]: JSON.stringify(domainItems)});\n                                        }\n                                    }\n                                }\n\n                                if (domainItems[url].price && !newPrice) {\n                                    if (!isNotFound(domainItems[url])) {\n                                        domainItems[url] = updateItemTrackStatus(domainItems[url], null,\n                                            [ITEM_STATUS.NOT_FOUND],\n                                            [ITEM_STATUS.DECREASED, ITEM_STATUS.INCREASED, ITEM_STATUS.FIXED, ITEM_STATUS.ACK_DECREASE]);\n\n                                        chrome.storage.local.set({[domain]: JSON.stringify(domainItems)}, () => {\n                                            // TODO: sendResponse(\"done\"); // foi actualizado ou não\n                                            const notificationId = `TRACK.PRICE_NOT_FOUND-${State.notificationsCounter}`;\n                                            const previousPrice = targetPrice ? ` (previous ${targetPrice})` : \"\";\n                                            createNotification(notificationId, ICONS.PRICE_NOT_FOUND, \"Price gone\",\n                                                `Price tag no longer found${previousPrice}`, url, url, domain);\n                                        });\n                                    }\n                                }\n                            } catch (e) {\n                                if (!isNotFound(domainItems[url])) {\n                                    console.warn(`Invalid price selection element in\\n${url}:\\t\"${domainItems[url].selection}\"`);\n                                    domainItems[url] = updateItemTrackStatus(domainItems[url], null,\n                                        [ITEM_STATUS.NOT_FOUND],\n                                        [ITEM_STATUS.DECREASED, ITEM_STATUS.INCREASED, ITEM_STATUS.FIXED, ITEM_STATUS.ACK_DECREASE]);\n\n                                    chrome.storage.local.set({[domain]: JSON.stringify(domainItems)}, () => {\n                                        const notificationId = `TRACK.PRICE_NOT_FOUND-${State.notificationsCounter}`;\n                                        const previousPrice = targetPrice ? ` (previous ${targetPrice})` : \"\";\n                                        createNotification(notificationId, ICONS.PRICE_NOT_FOUND, \"Price gone\",\n                                            `Price tag no longer found${previousPrice}`, url, url, domain);\n                                    });\n                                }\n                            }\n                        };\n\n                        request.open(\"GET\", url);\n                        request.send();\n                    }\n                }\n            }\n        }\n    });\n}\n\nfunction getTrackedItemsSortedBy(sortType, callback) {\n    chrome.storage.local.get(null, result => {\n        let trackedItems = [];\n        Object.keys(result).forEach(key => {\n            if (matchesDomain(key)) {\n                const domainData = result[key];\n                const domainItems = JSON.parse(domainData) || null;\n                if (domainItems) {\n                    let items = [];\n                    Object.keys(domainItems).forEach(url => {\n                        if (matchesHostname(url) && isWatched(domainItems[url])) {\n                            const item = {\n                                ...domainItems[url],\n                                url: url\n                            };\n                            items.push(item);\n                        }\n                    });\n                    trackedItems = [...trackedItems, ...items];\n                }\n            }\n        });\n        const sortByFn = sortTrackedItemsBy[sortType];\n        trackedItems.sort(sortByFn);\n        callback(trackedItems);\n    });\n}\n\nfunction removeTrackedItem(url, currentURL, callback) {\n    let found = false;\n    chrome.storage.local.get(null, result => {\n        Object.keys(result).forEach(domain => {\n            if (matchesDomain(domain)) {\n                const domainData = result[domain];\n                const domainItems = JSON.parse(domainData) || null;\n                if (domainItems[url]) {\n                    found = true;\n\n                    if (State._undoRemovedItemsResetTask) {\n                        clearTimeout(State._undoRemovedItemsResetTask);\n                        State = StateFactory.setUndoRemovedItemsResetTask(State, null);\n                    }\n\n                    const removedItem = {...domainItems[url]};\n                    State = StateFactory.addUndoRemovedItem(State, url, removedItem, MAX_UNDO_REMOVED_ITEMS);\n                    chrome.runtime.sendMessage({\n                        type: \"TRACKED_ITEMS.UNDO_STATUS\",\n                        payload: {isUndoStatusActive: true}\n                    });\n\n                    const undoRemovedItemsTask = setTimeout(() => {\n                        State = StateFactory.resetUndoRemovedItems(State);\n                        chrome.runtime.sendMessage({\n                            type: \"TRACKED_ITEMS.UNDO_STATUS\",\n                            payload: {isUndoStatusActive: false}\n                        });\n                    }, UNDO_REMOVED_ITEMS_TIMEOUT);\n\n                    State = StateFactory.setUndoRemovedItemsResetTask(State, undoRemovedItemsTask);\n\n                    domainItems[url] = updateItemTrackStatus(domainItems[url], null, null, [ITEM_STATUS.WATCHED]); // stop watching\n                    chrome.storage.local.set({[domain]: JSON.stringify(domainItems)}, () => {\n                        if (currentURL === url) {\n                            updateAutoSaveStatus(url, domain);\n                            updatePriceUpdateStatus(url, domain);\n                            updateExtensionAppearance(domain, url, false);\n                        }\n                        callback(true);\n                    });\n                }\n            }\n        });\n        if (!found) {\n            callback(false);\n        }\n    });\n}\n\nfunction undoRemoveTrackedItem(url, currentURL, callback) {\n    let found = false;\n    chrome.storage.local.get(null, result => {\n        Object.keys(result).forEach(domain => {\n            if (matchesDomain(domain)) {\n                const domainData = result[domain];\n                const domainItems = JSON.parse(domainData) || null;\n                if (domainItems[url]) {\n                    found = true;\n\n                    domainItems[url] = updateItemTrackStatus(domainItems[url], null, [ITEM_STATUS.WATCHED], null); // start watch again\n                    chrome.storage.local.set({[domain]: JSON.stringify(domainItems)}, () => {\n                        if (currentURL === url) {\n                            updateAutoSaveStatus(url, domain);\n                            updatePriceUpdateStatus(url, domain);\n                            updateExtensionAppearance(domain, url, false);\n                        }\n                        callback(true);\n                    });\n                }\n            }\n        });\n        if (!found) {\n            // No special treatment if item is not found; we can't undo nothing\n            callback(true);\n        }\n    });\n}\n\nfunction clearNotification(notifId, wasClosedByUser) {\n    chrome.notifications.clear(notifId, wasClickedByUser => {\n        if (wasClickedByUser || wasClosedByUser) {\n            const {domain, url, type} = State.notifications[notifId];\n            chrome.storage.local.get([domain], result => {\n                const domainItems = result && result[domain] ? JSON.parse(result[domain]) : null;\n                switch (type) {\n                    case ITEM_STATUS.DECREASED:\n                        domainItems[url] = updateItemTrackStatus(domainItems[url], null, [ITEM_STATUS.ACK_DECREASE]);\n                        break;\n                    case ITEM_STATUS.INCREASED:\n                        domainItems[url] = updateItemTrackStatus(domainItems[url], null, [ITEM_STATUS.ACK_INCREASE]);\n                        break;\n                }\n\n                chrome.storage.local.set({[domain]: JSON.stringify(domainItems)});\n            });\n        }\n\n        State = StateFactory.deleteNotificationsItem(State, notifId);\n    });\n}\n\nfunction createNotification(notifId, iconUrl, title, message, contextMessage = \"\", url, domain, type, extraOptions = {}) {\n    const options = {\n        type: \"basic\",\n        title,\n        message,\n        iconUrl,\n        contextMessage,\n        requireInteraction: true,\n        ...extraOptions\n    };\n\n    chrome.notifications.create(notifId, options, id => {\n        State = StateFactory.updateNotificationsItem(State, id, {\n            url,\n            domain,\n            type\n        });\n    });\n\n    State = StateFactory.incrementNotificationsCounter(State);\n}\n\nfunction isCanonicalURLRelevant(canonical) {\n    return canonical && matchesHostnameAndPath(canonical);\n}\n\nfunction matchesDomain(string) {\n    return MATCHES.DOMAIN.test(string);\n}\n\nfunction matchesHostname(string) {\n    return MATCHES.HOSTNAME.test(string);\n}\n\nfunction matchesHostnameAndPath(string) {\n    return MATCHES.CAPTURE.HOSTNAME_AND_PATH.test(string);\n}\n\nfunction matchesURL(string) {\n    return MATCHES.URL.test(string);\n}\n\nfunction parseDomainState(result, domain) {\n    return result && result[domain] && JSON.parse(result[domain]) || null;\n}\n\nfunction setupTrackingPolling() {\n    checkForPriceChanges();\n    setInterval(checkForPriceChanges, PRICE_CHECKING_INTERVAL);\n}\n\nfunction updateAutoSaveStatus(url, domain) {\n    chrome.storage.local.get([domain], result => {\n        const items = result && result[domain] ? JSON.parse(result[domain]) : {};\n        const isItemNullOrUnwatched = !items[url] || !isWatched(items[url]);\n        if (items && isItemNullOrUnwatched) {\n            const urlFromDomain = Object.keys(items)[0];\n            if (items[urlFromDomain] && items[urlFromDomain].selection) {\n                State = StateFactory.enableAutoSave(State, items[urlFromDomain].selection);\n            }\n        } else {\n            State = StateFactory.disableAutoSave(State);\n        }\n    });\n}\n\nfunction updatePriceUpdateStatus(url, domain) {\n    chrome.storage.local.get([domain], result => {\n        const items = result && result[domain] ? JSON.parse(result[domain]) : {};\n        const item = items[url];\n        const hasItemPriceIncOrDec = item && item.price !== item.currentPrice;\n        if (hasItemPriceIncOrDec) {\n            State = StateFactory.enablePriceUpdate(State, item.selection);\n        } else {\n            State = StateFactory.disablePriceUpdate(State);\n        }\n    });\n}\n\nfunction updateExtensionAppearance(currentDomain, currentURL, forcePageTrackingTo, fullURL) {\n    if (forcePageTrackingTo === true) {\n        setTrackedItemAppearance();\n        State = StateFactory.enableCurrentPageTracked(State);\n    } else if (forcePageTrackingTo === false) {\n        setDefaultAppearance();\n        State = StateFactory.disableCurrentPageTracked(State);\n    } else if (!forcePageTrackingTo) {\n        chrome.storage.local.get([currentDomain], result => {\n            const domainState = parseDomainState(result, currentDomain);\n            if (domainState) {\n                // NOTE: Making sure that full URL is also checked because item may have been saved with full URL\n                // in the past\n                const item = domainState[currentURL] || domainState[fullURL];\n                if (item && isWatched(item)) {\n                    setTrackedItemAppearance();\n                    State = StateFactory.enableCurrentPageTracked(State);\n                } else {\n                    setDefaultAppearance();\n                    State = StateFactory.disableCurrentPageTracked(State);\n                }\n            } else {\n                setDefaultAppearance();\n                State = StateFactory.disableCurrentPageTracked(State);\n            }\n        });\n    }\n}\n\nfunction captureHostAndPathFromURL(url) {\n    const captureHostAndPath = url.match(MATCHES.CAPTURE.HOSTNAME_AND_PATH);\n    let hostAndPath = null;\n    if (captureHostAndPath) {\n        [, hostAndPath] = captureHostAndPath;\n    }\n    return hostAndPath;\n}\n\nfunction captureProtocolHostAndPathFromURL(url) {\n    const captureProtocolHostAndPath = url.match(MATCHES.CAPTURE.PROTOCOL_HOSTNAME_AND_PATH);\n    let protocolHostAndPath = null;\n    if (captureProtocolHostAndPath) {\n        [, protocolHostAndPath] = captureProtocolHostAndPath;\n    }\n    return protocolHostAndPath;\n}\n\nfunction searchForEqualPathWatchedItem(domainState, currentURL, callback) {\n    const currentHostAndPath = captureHostAndPathFromURL(currentURL);\n    let foundOne = false;\n    for (let url in domainState) {\n        if (domainState.hasOwnProperty(url) && matchesURL(url)) {\n            if (isWatched(domainState[url])) {\n                if (currentURL === url) {\n                    //    if they're exactly the same\n                    callback(null);\n                    return;\n                } else {\n                    const hostAndPath = captureHostAndPathFromURL(url);\n                    if (hostAndPath === currentHostAndPath) {\n                        foundOne = foundOne === false;\n                        callback(url);\n                        return;\n                    }\n                }\n            }\n        }\n    }\n\n    callback(null);\n}\n\nfunction buildSaveConfirmationPayload(currentURL, similarURL) {\n    return {\n        title: \"Item with similar URL to existing one\",\n        message: \"It appears that the item URL you're trying to save:<br>\" +\n            `<i><a href=\"${currentURL}\" target=\"_blank\" rel=\"noopener noreferrer\">${currentURL}</a></i><br>` +\n            \"is pretty similar to<br>\" +\n            `<i><a href=\"${similarURL}\" target=\"_blank\" rel=\"noopener noreferrer\">${similarURL}</a></i><br><br>` +\n            \"Since your choice will affect the way items are tracked in this site futurely,<br>please help us helping you by choosing carefully one of the following options:\",\n        buttons: [\n            \"It's not, save it! Remember this option for this site.\",\n            \"Don't save. Ask me again for items of this site!\",\n            \"Indeed the same item. Don't save! Remember this option for this site. (Use just URL path for accessing items)\",\n            \"For now save this item. Ask me again next time!\"\n        ]\n    };\n}\n\nfunction buildURLConfirmationPayload(canonicalURL, browserURL, domain) {\n    return {\n        title: \"This website recommends to follow this item through a different URL\",\n        message: `<u>${domain}</u> says that a more accurate URL for this item would be:<br>` +\n            `<i><a href=\"${canonicalURL}\" target=\"_blank\"  rel=\"noopener noreferrer\">${canonicalURL}</a></i><br>` +\n            \"If this is correct, we recommend you to follow it.<br><br>\" +\n            \"<b>However</b> you can still opt to choose following the current browser URL:<br>\" +\n            `<i><a href=\"${browserURL}\" target=\"_blank\" rel=\"noopener noreferrer\">${browserURL}</a></i><br><br>` +\n            \"Since your choice will affect the way items are tracked in this site futurely,<br>please help us helping you by choosing carefully one of the following options:\",\n        buttons: [\n            \"Use recommended URL. Remember this option for this site\",\n            \"Use recommended URL but just this time\",\n            \"It's not correct, use the current browser URL. Remember this option\",\n            \"Don't use recommended URL. Use the current browser URL instead but just this time\"\n        ]\n    };\n}\n\nfunction checkForURLSimilarity(tabId, domain, currentURL, callback) {\n    chrome.storage.local.get([domain], result => {\n        const domainState = result && result[domain] && JSON.parse(result[domain]) || null;\n        if (domainState) {\n            if (domainState._isPathEnoughToTrack === true) {\n                // since it's true we can say that that domain items' path is enough to track items in this domain\n                searchForEqualPathWatchedItem(domainState, currentURL, similarURL => {\n                    if (similarURL) {\n                        callback(false, false);\n                    } else {\n                        callback(true);\n                    }\n                });\n            } else if (domainState._isPathEnoughToTrack === false) {\n                callback(true);\n            } else {\n                // it's the first time user is being inquired about items similarity in this domain\n                searchForEqualPathWatchedItem(domainState, currentURL, similarURL => {\n                    if (similarURL) {\n                        // found an URL whose host and path are equals to the currentURL trying to be saved\n                        // prompt user to confirm if the item is the same\n\n                        const modalElementId = \"price-tag--save-confirmation\";\n                        chrome.tabs.sendMessage(tabId, {\n                            type: \"CONFIRMATION_DISPLAY.CREATE\",\n                            payload: {elementId: modalElementId}\n                        }, ({status}) => {\n                            if (status === 1) {\n                                const payload = buildSaveConfirmationPayload(currentURL, similarURL);\n                                chrome.tabs.sendMessage(tabId, {\n                                    type: \"CONFIRMATION_DISPLAY.LOAD\",\n                                    payload\n                                }, ({status, index}) => {\n                                    chrome.tabs.sendMessage(tabId, {\n                                        type: \"CONFIRMATION_DISPLAY.REMOVE\",\n                                        payload: {elementId: modalElementId}\n                                    });\n                                    switch (status) {\n                                        case 1:\n                                            switch (index) {\n                                                case 0:\n                                                    // said Yes: not the same item\n                                                    domainState._isPathEnoughToTrack = false;\n                                                    chrome.storage.local.set({[domain]: JSON.stringify(domainState)});\n                                                    callback(true);\n                                                    break;\n                                                case 1:\n                                                    callback(false, true);\n                                                    break;\n                                                case 2:\n                                                    // said No: same item (path is enough for this site items)\n                                                    domainState._isPathEnoughToTrack = true;\n                                                    chrome.storage.local.set({[domain]: JSON.stringify(domainState)});\n                                                    callback(false, false);\n                                                    break;\n                                                case 3:\n                                                    // said Save this but for others Ask me later\n                                                    callback(true);\n                                                    break;\n                                                default:\n                                                    // cannot recognize this modal button click\n                                                    callback(false, true);\n                                                    break;\n                                            }\n                                            break;\n                                        case 2:\n                                            // close modal\n                                            callback(false, true);\n                                            break;\n                                        default:\n                                            // something wrong with modal interaction\n                                            callback(false, true);\n                                            break;\n                                    }\n                                });\n                            } else {\n                                // something went wrong creating the modal\n                                callback(false, true);\n                            }\n                        });\n                    }\n                    else {\n                        // no URL has host and path equals to the currentURL (can save the item)\n                        callback(true);\n                    }\n                });\n            }\n        } else {\n            // this means it's the first item being saved belonging to this domain (can save the item)\n            callback(true);\n        }\n    });\n}\n\nfunction onXHR(url, callback) {\n    const request = new XMLHttpRequest();\n    request.onload = function () {\n        const template = createHTMLTemplate(this.response);\n        callback(template);\n    };\n    request.open(\"GET\", url);\n    request.send();\n\n}\n\nfunction onTabContextChange(tabId, url) {\n    const captureDomain = url.match(MATCHES.CAPTURE.DOMAIN_IN_URL);\n    if (captureDomain) {\n        const [, domain] = captureDomain;\n        State = StateFactory.updateCurrentDomain(State, domain);\n        chrome.storage.local.get([domain], result => {\n            const domainState = result && result[domain] && JSON.parse(result[domain]) || null;\n            // check if user has already a preference to use the canonical URL if available\n            if (domainState && domainState._canUseCanonical === false) {\n                State = StateFactory.updateCanonicalURL(State, null);\n                State = StateFactory.updateCurrentURL(State, url);\n                State = StateFactory.updateBrowserURL(State, url);\n\n                if (domainState._isPathEnoughToTrack === true) {\n                    const protocolHostAndPathFromURL = captureProtocolHostAndPathFromURL(url);\n                    if (protocolHostAndPathFromURL) {\n                        State = StateFactory.updateCurrentURL(State, protocolHostAndPathFromURL);\n                        State = StateFactory.updateBrowserURL(State, protocolHostAndPathFromURL);\n                    }\n                }\n\n                updateAutoSaveStatus(State.currentURL, State.domain);\n                updatePriceUpdateStatus(State.currentURL, State.domain);\n                updateExtensionAppearance(State.domain, State.currentURL, null, url);\n            } else {\n                // First thing to do, check:\n                // If canonical was updated (compared to the previously) + if it's relevant\n                State = StateFactory.updateBrowserURL(State, url);\n\n                onXHR(url, template => {\n                    const canonicalURL = getCanonicalPathFromSource(template);\n                    const canUseCanonical = isCanonicalURLRelevant(canonicalURL);\n\n                    if (canUseCanonical) {\n                        State = StateFactory.updateCurrentURL(State, canonicalURL);\n                        State = StateFactory.updateCanonicalURL(State, canonicalURL);\n                    } else {\n                        State = StateFactory.updateCanonicalURL(State, null);\n                        State = StateFactory.updateCurrentURL(State, url);\n\n                        if (domainState && domainState._isPathEnoughToTrack === true) {\n                            const protocolHostAndPathFromURL = captureProtocolHostAndPathFromURL(url);\n                            if (protocolHostAndPathFromURL) {\n                                State = StateFactory.updateCurrentURL(State, protocolHostAndPathFromURL);\n                                State = StateFactory.updateBrowserURL(State, protocolHostAndPathFromURL);\n                            }\n                        }\n                    }\n\n                    updateAutoSaveStatus(State.currentURL, State.domain);\n                    updatePriceUpdateStatus(State.currentURL, State.domain);\n                    updateExtensionAppearance(State.domain, State.currentURL, null, url);\n                });\n            }\n        });\n    }\n}\n\n// TODO: break this down into smaller functions\nfunction attachEvents() {\n    chrome.runtime.onInstalled.addListener(() => {\n        console.log(\"Price tag installed.\");\n    });\n\n    chrome.tabs.onActivated.addListener(() => {\n        chrome.tabs.query({active: true, currentWindow: true}, ([{id, url}]) => {\n            if (url.startsWith(\"http\")) {\n                onTabContextChange(id, url);\n                State = StateFactory.updateFaviconURL(State, State._faviconURLMap[id] || null);\n            } else {\n                setDefaultAppearance();\n            }\n        });\n    });\n\n    chrome.tabs.onUpdated.addListener((tabId, {favIconUrl}, {active, url}) => {\n        if (url.startsWith(\"http\")) {\n            if (active) {\n                if (favIconUrl) {\n                    State = StateFactory.updateFaviconURLMapItem(State, tabId, favIconUrl);\n                    State = StateFactory.updateFaviconURL(State, favIconUrl);\n                }\n            }\n        } else {\n            setDefaultAppearance();\n        }\n    });\n\n    chrome.webNavigation.onCompleted.addListener(({frameId}) => {\n        if (frameId === 0) {\n            chrome.tabs.query({active: true, currentWindow: true}, (tabs) => {\n                if (tabs.length > 0) {\n                    const [{id, url}] = tabs;\n                    onTabContextChange(id, url);\n                }\n            });\n        }\n    });\n\n    chrome.webNavigation.onHistoryStateUpdated.addListener(() => {\n        chrome.tabs.query({active: true, currentWindow: true}, (tabs) => {\n            if (tabs.length > 0) {\n                const [{id: tabId, url}] = tabs;\n                if (url !== undefined && url !== State.browserURL) {\n                    onTabContextChange(tabId, url);\n                }\n            }\n        });\n    });\n\n    chrome.runtime.onMessage.addListener(\n        ({type, payload = {}}, sender, sendResponse) => {\n            let isUndoStatusActive;\n            const {id, url: itemUrl, sortByType} = payload;\n            const {recordActive, autoSaveEnabled, isPriceUpdateEnabled, currentURL: url, domain} = State;\n            switch (type) {\n                case \"POPUP.STATUS\":\n                    sendResponse({status: 1, state: {recordActive, autoSaveEnabled, isPriceUpdateEnabled}});\n                    break;\n                case \"RECORD.ATTEMPT\":\n                    State = StateFactory.toggleRecord(State);\n\n                    if (State.recordActive) {\n                        const {url} = payload;\n                        chrome.tabs.sendMessage(id, {\n                            type: \"RECORD.START\",\n                            payload: {url}\n                        }, onRecordDone.bind(null, id));\n                    } else {\n                        chrome.tabs.sendMessage(id, {type: \"RECORD.CANCEL\"}, onRecordCancel);\n                    }\n                    sendResponse({status: 1, state: {recordActive: State.recordActive}});\n                    break;\n                case \"AUTO_SAVE.STATUS\":\n                    chrome.storage.local.get([domain], result => {\n                        const domainState = result && result[domain] && JSON.parse(result[domain]) || null;\n                        if (domainState) {\n                            if (domainState._isPathEnoughToTrack === true) {\n                                // since it's true we can say that that domain items' path is enough to track items in this domain\n                                searchForEqualPathWatchedItem(domainState, url, similarURL => {\n                                    if (!similarURL) {\n                                        chrome.tabs.sendMessage(id, {\n                                            type: \"AUTO_SAVE.CHECK_STATUS\",\n                                            payload: {url, selection: State.selection}\n                                        }, onAutoSaveCheckStatus.bind(null, sendResponse));\n                                    } else {\n                                        sendResponse({status: -1});\n                                    }\n                                });\n                            } else {\n                                chrome.tabs.sendMessage(id, {\n                                    type: \"AUTO_SAVE.CHECK_STATUS\",\n                                    payload: {url, selection: State.selection}\n                                }, onAutoSaveCheckStatus.bind(null, sendResponse));\n                            }\n                        } else {\n                            // domain doesn't exist\n                            chrome.tabs.sendMessage(id, {\n                                type: \"AUTO_SAVE.CHECK_STATUS\",\n                                payload: {url, selection: State.selection}\n                            }, onAutoSaveCheckStatus.bind(null, sendResponse));\n                        }\n                    });\n                    return true;\n                case \"AUTO_SAVE.ATTEMPT\":\n                    if (State.autoSaveEnabled) {\n                        const {domain, currentURL: stateUrl, selection, price, faviconURL, faviconAlt, originalBackgroundColor} = State;\n\n                        canDisplayURLConfirmation(State, domain, canDisplay => {\n                            if (canDisplay) {\n                                onConfirmURLForCreateItemAttempt(id, domain, stateUrl, selection, price, faviconURL, faviconAlt, (canSave, useCaninocal) => {\n                                    if (canSave) {\n                                        const url = useCaninocal ? State.canonicalURL : State.browserURL;\n\n                                        checkForURLSimilarity(id, domain, url, (isToSave, autoSaveStatus) => {\n                                            if (isToSave) {\n                                                createItem(domain, url, selection, price, faviconURL, faviconAlt, [ITEM_STATUS.WATCHED], () => {\n                                                    chrome.tabs.sendMessage(id, {\n                                                        type: \"PRICE_TAG.HIGHLIGHT.STOP\",\n                                                        payload: {selection, originalBackgroundColor}\n                                                    }, onSimilarElementHighlight);\n\n                                                    updateExtensionAppearance(domain, url, true);\n                                                    State = StateFactory.disableAutoSave(State);\n\n                                                    sendResponse(false);\n                                                });\n                                            } else {\n                                                // For Exceptions (including when there's similar item - should be caught by \"AUTO_SAVE.STATUS\")\n                                                if (!autoSaveStatus) {\n                                                    State = StateFactory.disableAutoSave(State);\n                                                }\n                                            }\n                                        });\n                                    }\n                                });\n                            } else {\n                                checkForURLSimilarity(id, domain, stateUrl, isToSave => {\n                                    if (isToSave) {\n                                        createItem(domain, stateUrl, selection, price, faviconURL, faviconAlt, [ITEM_STATUS.WATCHED], () => {\n                                            chrome.tabs.sendMessage(id, {\n                                                type: \"PRICE_TAG.HIGHLIGHT.STOP\",\n                                                payload: {selection, originalBackgroundColor}\n                                            }, onSimilarElementHighlight);\n\n                                            updateExtensionAppearance(domain, stateUrl, true);\n                                            State = StateFactory.disableAutoSave(State);\n\n                                            sendResponse(false);\n                                        });\n                                    }\n                                });\n                            }\n                        });\n\n                        return true;\n                    } else {\n                        sendResponse(false);\n                    }\n                    break;\n                case \"AUTO_SAVE.HIGHLIGHT.PRE_START\":\n                    if (State.autoSaveEnabled) {\n                        const {selection} = State;\n                        chrome.tabs.sendMessage(id, {\n                            type: \"PRICE_TAG.HIGHLIGHT.START\",\n                            payload: {selection}\n                        }, onSimilarElementHighlight);\n                    }\n                    break;\n                case \"AUTO_SAVE.HIGHLIGHT.PRE_STOP\":\n                    if (State.autoSaveEnabled) {\n                        const {selection, originalBackgroundColor} = State;\n                        chrome.tabs.sendMessage(id, {\n                            type: \"PRICE_TAG.HIGHLIGHT.STOP\",\n                            payload: {selection, originalBackgroundColor}\n                        }, onSimilarElementHighlight);\n                    }\n                    break;\n                case \"PRICE_UPDATE.STATUS\":\n                    chrome.storage.local.get([State.domain], result => {\n                        const domainItems = result && result[State.domain] ? JSON.parse(result[State.domain]) : {};\n                        const item = domainItems[State.currentURL];\n                        if (item) {\n                            chrome.tabs.sendMessage(id, {\n                                type: \"PRICE_UPDATE.CHECK_STATUS\",\n                                payload: {selection: State.selection}\n                            }, onPriceUpdateCheckStatus.bind(null, sendResponse, item.price));\n                        } else {\n                            sendResponse(false);\n                        }\n                    });\n                    return true;\n                case \"PRICE_UPDATE.ATTEMPT\":\n                    if (State.isPriceUpdateEnabled) {\n                        const {domain, currentURL: stateUrl, selection, price: updatedPrice, originalBackgroundColor} = State;\n                        const price = updatedPrice && toPrice(updatedPrice);\n                        chrome.storage.local.get([domain], result => {\n                            const domainItems = result && result[domain] ? JSON.parse(result[domain]) : {};\n\n                            domainItems[stateUrl] = updateItemTrackStatus(domainItems[stateUrl], price,\n                                null,\n                                [\n                                    ITEM_STATUS.INCREASED, ITEM_STATUS.ACK_INCREASE,\n                                    ITEM_STATUS.DECREASED, ITEM_STATUS.INCREASED,\n                                    ITEM_STATUS.DECREASED, ITEM_STATUS.ACK_DECREASE,\n                                    ITEM_STATUS.DECREASED, ITEM_STATUS.DECREASED,\n                                    ITEM_STATUS.NOT_FOUND\n                                ]);\n                            domainItems[stateUrl] = updateItemDiffPercentage(domainItems[stateUrl]);\n\n                            chrome.storage.local.set({[domain]: JSON.stringify(domainItems)});\n\n                            chrome.tabs.sendMessage(id, {\n                                type: \"PRICE_TAG.HIGHLIGHT.STOP\",\n                                payload: {selection, originalBackgroundColor}\n                            }, onSimilarElementHighlight);\n\n                            State = StateFactory.disablePriceUpdate(State);\n                            sendResponse(false);\n                        });\n                    }\n                    return true;\n                case \"PRICE_UPDATE.HIGHLIGHT.PRE_START\":\n                    if (State.isPriceUpdateEnabled) {\n                        const {selection} = State;\n                        chrome.tabs.sendMessage(id, {\n                            type: \"PRICE_TAG.HIGHLIGHT.START\",\n                            payload: {selection}\n                        }, onSimilarElementHighlight);\n                    }\n                    break;\n                case \"PRICE_UPDATE.HIGHLIGHT.PRE_STOP\":\n                    if (State.isPriceUpdateEnabled) {\n                        const {selection, originalBackgroundColor} = State;\n                        chrome.tabs.sendMessage(id, {\n                            type: \"PRICE_TAG.HIGHLIGHT.STOP\",\n                            payload: {selection, originalBackgroundColor}\n                        }, onSimilarElementHighlight);\n                    }\n                    break;\n                case \"TRACKED_ITEMS.OPEN\":\n                    State = StateFactory.updateSortItemsBy(State, SORT_ITEMS_BY_TIME);\n                    isUndoStatusActive = State._undoRemovedItems.length > 0;\n                    sendResponse({isUndoStatusActive});\n                    break;\n                case \"TRACKED_ITEMS.GET\":\n                    getTrackedItemsSortedBy(State._sortItemsBy, sendResponse);\n                    return true;\n                case \"TRACKED_ITEMS.UNFOLLOW\":\n                    removeTrackedItem(itemUrl, State.currentURL, sendResponse);\n                    return true;\n                case \"TRACKED_ITEMS.CHANGE_SORT\":\n                    State = StateFactory.updateSortItemsBy(State, SORT_BY_TYPES[sortByType]);\n                    break;\n                case \"TRACKED_ITEMS.UNDO_ATTEMPT\":\n                    if (State._undoRemovedItems.length > 0) {\n                        const undoRemovedItem = StateFactory.getUndoRemovedItemsHead(State);\n\n                        undoRemoveTrackedItem(undoRemovedItem.url, State.currentURL, response => {\n                            if (response) {\n                                State = StateFactory.removeUndoRemovedItem(State);\n                                State._undoRemovedItems.length === 0 ?\n                                    sendResponse({isUndoStatusActive: false}) :\n                                    sendResponse({isUndoStatusActive: true});\n                            }\n                        });\n                        return true;\n                    } else {\n                        sendResponse({isUndoStatusActive: false})\n                    }\n                    break;\n            }\n        });\n\n    chrome.notifications.onClicked.addListener(notifId => {\n        chrome.tabs.create({url: State.notifications[notifId].url});\n        clearNotification(notifId);\n    });\n\n\n    // TODO: update and keep tracking\n    chrome.notifications.onButtonClicked.addListener((notifId, buttonIndex) => {\n        const {domain, url, type} = State.notifications[notifId];\n        switch (buttonIndex) {\n            case 0:\n                switch (type) {\n                    case ITEM_STATUS.DECREASED:\n                        chrome.storage.local.get([domain], result => {\n                            const domainItems = result && result[domain] ? JSON.parse(result[domain]) : {};\n                            if (domainItems[url]) {\n                                const {price: newPrice} = domainItems[url];\n                                domainItems[url] = updateItemTrackStatus(domainItems[url], newPrice, null, [ITEM_STATUS.DECREASED, ITEM_STATUS.ACK_DECREASE], true);\n                                chrome.storage.local.set({[domain]: JSON.stringify(domainItems)});\n                            }\n                        });\n                        break;\n                    case ITEM_STATUS.INCREASED:\n                        chrome.storage.local.get([domain], result => {\n                            const domainItems = result && result[domain] ? JSON.parse(result[domain]) : {};\n                            if (domainItems[url]) {\n                                const {previousPrice: priceBeforeIncreasing} = domainItems[url];\n                                domainItems[url] = updateItemTrackStatus(domainItems[url], priceBeforeIncreasing, null, [ITEM_STATUS.INCREASED, ITEM_STATUS.ACK_INCREASE], true);\n                                chrome.storage.local.set({[domain]: JSON.stringify(domainItems)});\n                            }\n                        });\n                        break;\n                }\n                break;\n            case 1:\n                switch (type) {\n                    case ITEM_STATUS.DECREASED, ITEM_STATUS.INCREASED:\n                        chrome.storage.local.get([domain], result => {\n                            const domainItems = result && result[domain] ? JSON.parse(result[domain]) : {};\n                            if (domainItems[url]) {\n                                domainItems[url] = updateItemTrackStatus(domainItems[url], null, null, ALL_ITEM_STATUSES); // stop watching\n                                chrome.storage.local.set({[domain]: JSON.stringify(domainItems)});\n                            }\n                        });\n                        break;\n                }\n                break;\n        }\n    });\n\n    chrome.notifications.onClosed.addListener(clearNotification);\n}\n\nfunction filterAllTrackedItems(result) {\n    let filteredResult = {};\n    for (let domain in result) {\n        if (result.hasOwnProperty(domain) && matchesDomain(domain) && result[domain]) {\n            const domainItems = JSON.parse(result[domain]);\n            filteredResult = {\n                ...filteredResult,\n                [domain]: domainItems\n            };\n        }\n    }\n    return filteredResult;\n}\n\nfunction syncStorageState() {\n    chrome.storage.local.get(null, localResult => {\n        const localState = filterAllTrackedItems(localResult);\n\n        chrome.storage.sync.get(null, syncResult => {\n                const syncState = filterAllTrackedItems(syncResult);\n                // TODO: replace this with a lodash cloneDeep !!\n                const freshState = JSON.parse(JSON.stringify(localState));\n\n                for (let syncDomain in syncState) {\n                    if (syncState.hasOwnProperty(syncDomain) && matchesDomain(syncDomain)) {\n                        const syncStateDomain = syncState[syncDomain];\n                        if (!freshState[syncDomain]) {\n                            // TODO: replace this with a lodash cloneDeep !!\n                            freshState[syncDomain] = JSON.parse(JSON.stringify(syncStateDomain));\n                        } else {\n                            for (let syncUrl in syncStateDomain) {\n                                if (syncStateDomain.hasOwnProperty(syncUrl)) {\n                                    const syncItem = syncStateDomain[syncUrl];\n                                    if (!freshState[syncDomain][syncUrl]) {\n                                        freshState[syncDomain][syncUrl] = Object.assign({}, syncItem);\n                                    } else if (syncItem.lastUpdateTimestamp > freshState[syncDomain][syncUrl].lastUpdateTimestamp) {\n                                        // TODO: replace this with a lodash cloneDeep !!\n                                        freshState[syncDomain][syncUrl] = JSON.parse(JSON.stringify(syncItem));\n                                    }\n                                }\n                            }\n                        }\n\n                    }\n                }\n\n                chrome.storage.local.set(StateFactory.toStorageStateFormat(freshState));\n                chrome.storage.sync.set(StateFactory.toStorageStateFormat(freshState));\n            }\n        );\n    });\n}\n\nfunction setupSyncStorageState() {\n    syncStorageState();\n    setInterval(syncStorageState, SYNCHING_INTERVAL);\n}\n\nfunction bootstrap() {\n    setupSyncStorageState();\n    setupTrackingPolling();\n    attachEvents();\n}\n\nbootstrap();\n"],"names":["commonjsHelpers.commonjsGlobal","freeGlobal","Symbol","root","objectProto","nativeObjectToString","symToStringTag","getRawTag","objectToString","isObject","baseGetTag","coreJsData","funcProto","funcToString","hasOwnProperty","isMasked","isFunction","toSource","getValue","baseIsNative","getNative","nativeCreate","HASH_UNDEFINED","hashClear","hashDelete","hashGet","hashHas","hashSet","eq","assocIndexOf","listCacheClear","listCacheDelete","listCacheGet","listCacheHas","listCacheSet","Map","Hash","ListCache","isKeyable","getMapData","mapCacheClear","mapCacheDelete","mapCacheGet","mapCacheHas","mapCacheSet","MapCache","setCacheAdd","setCacheHas","strictIndexOf","baseFindIndex","baseIsNaN","baseIndexOf","Set","setToArray","noop","arrayIncludes","arrayIncludesWith","createSet","cacheHas","SetCache","baseUniq","TIME","CURRENT_PRICE","PRICE_CHECKING_INTERVAL","SYNCHING_INTERVAL","MAX_UNDO_REMOVED_ITEMS","UNDO_REMOVED_ITEMS_TIMEOUT","StateFactory","createState","sortItemByType","recordActive","notifications","notificationsCounter","autoSaveEnabled","isPriceUpdateEnabled","selection","isSimilarElementHighlighted","originalBackgroundColor","isCurrentPageTracked","faviconURL","_faviconURLMap","currentURL","canonicalURL","browserURL","domain","_sortItemsBy","_undoRemovedItems","_undoRemovedItemsResetTask","toggleRecord","state","disableRecord","updateCurrentDomain","updateCurrentURL","updateCanonicalURL","updateBrowserURL","enableCurrentPageTracked","disableCurrentPageTracked","updateFaviconURL","updateFaviconURLMapItem","tabId","enableAutoSave","disableAutoSave","enablePriceUpdate","disablePriceUpdate","setSelectionInfo","price","faviconAlt","setSimilarElementHighlight","incrementNotificationsCounter","deleteNotificationsItem","notificationId","newState","updateNotificationsItem","notificationState","updateSortItemsBy","addUndoRemovedItem","url","timestamp","maxItems","itemRef","_undoRemovedItemsClone","unshift","slice","getUndoRemovedItemsHead","removeUndoRemovedItem","shift","resetUndoRemovedItems","setUndoRemovedItemsResetTask","task","toStorageStateFormat","Object","keys","reduce","JSON","stringify","ITEM_STATUS","WATCHED","NOT_FOUND","INCREASED","DECREASED","ACK_DECREASE","ACK_INCREASE","FIXED","Item","constructor","previousPrice","statuses","diffPercentage","currentPrice","startingPrice","Date","getTime","lastUpdateTimestamp","updateCurrentPrice","newPrice","updateDiffPercentage","diff","Math","abs","diffPerc","parseFloat","toFixed","ceil","floor","updateTrackStatus","item","statusesToAdd","statusesToRemove","forceStartingPrice","uniq","removeStatuses","length","filter","status","includes","isWatched","isNotFound","hasAcknowledgeDecrease","hasAcknowledgeIncrease","sortItemsByTime","tsA","tsB","sortItemsByCurrentPrice","cpA","cpB","createHTMLTemplate","html","template","document","createElement","innerHTML","trim","content","getCanonicalPathFromSource","source","canonicalElement","querySelector","getAttribute","toPrice","priceNumber","replace","formattedPrice","State","SORT_ITEMS_BY_TIME","DEFAULT_ICON","TRACKED_ITEM_ICON","DEFAULT_TITLE","TRACKED_ITEM_TITLE","ICONS","PRICE_UPDATE","PRICE_NOT_FOUND","PRICE_FIX","MATCHES","PRICE","HOSTNAME","DOMAIN","URL","CAPTURE","DOMAIN_IN_URL","HOSTNAME_AND_PATH","PROTOCOL_HOSTNAME_AND_PATH","ALL_ITEM_STATUSES","values","updateItemCurrentPrice","newItem","updateItemDiffPercentage","updateItemTrackStatus","updatedItem","onConfirmURLForCreateItemAttempt","callback","modalElementId","chrome","tabs","sendMessage","type","payload","elementId","buildURLConfirmationPayload","index","storage","local","get","result","domainState","parse","_canUseCanonical","set","onRecordDone","canDisplayURLConfirmation","canDisplay","canSave","useCaninocal","checkForURLSimilarity","isToSave","createItem","updateExtensionAppearance","onRecordCancel","onAutoSaveCheckStatus","sendResponse","onPriceUpdateCheckStatus","trackedPrice","onSimilarElementHighlight","isHighlighted","items","isUseCanonicalPrefUnset","undefined","setDefaultAppearance","browserAction","setTitle","title","setIcon","path","setTrackedItemAppearance","checkForPriceChanges","matchesDomain","domainItems","matchesURL","request","XMLHttpRequest","targetPrice","onload","response","textContent","textContentMatch","match","createNotification","buttons","notificationOptions","push","e","console","warn","open","send","getTrackedItemsSortedBy","sortType","trackedItems","forEach","key","domainData","matchesHostname","sortByFn","sortTrackedItemsBy","sort","removeTrackedItem","found","clearTimeout","removedItem","runtime","isUndoStatusActive","undoRemovedItemsTask","setTimeout","updateAutoSaveStatus","updatePriceUpdateStatus","undoRemoveTrackedItem","clearNotification","notifId","wasClosedByUser","clear","wasClickedByUser","iconUrl","message","contextMessage","extraOptions","options","requireInteraction","create","id","isCanonicalURLRelevant","canonical","matchesHostnameAndPath","string","test","parseDomainState","setupTrackingPolling","setInterval","isItemNullOrUnwatched","urlFromDomain","hasItemPriceIncOrDec","currentDomain","forcePageTrackingTo","fullURL","captureHostAndPathFromURL","captureHostAndPath","hostAndPath","captureProtocolHostAndPathFromURL","captureProtocolHostAndPath","protocolHostAndPath","searchForEqualPathWatchedItem","currentHostAndPath","foundOne","buildSaveConfirmationPayload","similarURL","_isPathEnoughToTrack","onXHR","onTabContextChange","captureDomain","protocolHostAndPathFromURL","canUseCanonical","attachEvents","onInstalled","addListener","log","onActivated","query","active","currentWindow","startsWith","onUpdated","favIconUrl","webNavigation","onCompleted","frameId","onHistoryStateUpdated","onMessage","sender","itemUrl","sortByType","bind","stateUrl","autoSaveStatus","updatedPrice","SORT_BY_TYPES","undoRemovedItem","onClicked","onButtonClicked","buttonIndex","priceBeforeIncreasing","onClosed","filterAllTrackedItems","filteredResult","syncStorageState","localResult","localState","sync","syncResult","syncState","freshState","syncDomain","syncStateDomain","syncUrl","syncItem","assign","setupSyncStorageState","bootstrap"],"mappings":"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"}