{"version":3,"file":"background.js","sources":["../node_modules/lodash/_freeGlobal.js","../node_modules/lodash/_root.js","../node_modules/lodash/_Symbol.js","../node_modules/lodash/_getRawTag.js","../node_modules/lodash/_objectToString.js","../node_modules/lodash/_baseGetTag.js","../node_modules/lodash/isObject.js","../node_modules/lodash/isFunction.js","../node_modules/lodash/_coreJsData.js","../node_modules/lodash/_isMasked.js","../node_modules/lodash/_toSource.js","../node_modules/lodash/_baseIsNative.js","../node_modules/lodash/_getValue.js","../node_modules/lodash/_getNative.js","../node_modules/lodash/_nativeCreate.js","../node_modules/lodash/_hashClear.js","../node_modules/lodash/_hashDelete.js","../node_modules/lodash/_hashGet.js","../node_modules/lodash/_hashHas.js","../node_modules/lodash/_hashSet.js","../node_modules/lodash/_Hash.js","../node_modules/lodash/_listCacheClear.js","../node_modules/lodash/eq.js","../node_modules/lodash/_assocIndexOf.js","../node_modules/lodash/_listCacheDelete.js","../node_modules/lodash/_listCacheGet.js","../node_modules/lodash/_listCacheHas.js","../node_modules/lodash/_listCacheSet.js","../node_modules/lodash/_ListCache.js","../node_modules/lodash/_Map.js","../node_modules/lodash/_mapCacheClear.js","../node_modules/lodash/_isKeyable.js","../node_modules/lodash/_getMapData.js","../node_modules/lodash/_mapCacheDelete.js","../node_modules/lodash/_mapCacheGet.js","../node_modules/lodash/_mapCacheHas.js","../node_modules/lodash/_mapCacheSet.js","../node_modules/lodash/_MapCache.js","../node_modules/lodash/_setCacheAdd.js","../node_modules/lodash/_setCacheHas.js","../node_modules/lodash/_SetCache.js","../node_modules/lodash/_baseFindIndex.js","../node_modules/lodash/_baseIsNaN.js","../node_modules/lodash/_strictIndexOf.js","../node_modules/lodash/_baseIndexOf.js","../node_modules/lodash/_arrayIncludes.js","../node_modules/lodash/_arrayIncludesWith.js","../node_modules/lodash/_cacheHas.js","../node_modules/lodash/_Set.js","../node_modules/lodash/noop.js","../node_modules/lodash/_setToArray.js","../node_modules/lodash/_createSet.js","../node_modules/lodash/_baseUniq.js","../node_modules/lodash/uniq.js","../src/config/sort-tracked-items.js","../src/config/background.js","../src/config/item-statuses.js","../src/config/assets.js","../src/constants/regexp.js","../src/core/events/appearance.js","../src/utils/lang.js","../src/utils/storage.js","../src/core/factories/state.js","../src/core/events/storage.js","../src/core/entities/item.js","../src/core/factories/item.js","../src/utils/sort-tracked-items.js","../src/utils/dom.js","../src/utils/view.js","../background.js"],"sourcesContent":["/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","var getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n","var nativeCreate = require('./_nativeCreate');\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nmodule.exports = hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = hashDelete;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nmodule.exports = hashGet;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nmodule.exports = hashHas;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nmodule.exports = hashSet;\n","var hashClear = require('./_hashClear'),\n    hashDelete = require('./_hashDelete'),\n    hashGet = require('./_hashGet'),\n    hashHas = require('./_hashHas'),\n    hashSet = require('./_hashSet');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nmodule.exports = Hash;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nmodule.exports = listCacheClear;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","var eq = require('./eq');\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nmodule.exports = listCacheDelete;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nmodule.exports = listCacheGet;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nmodule.exports = listCacheHas;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nmodule.exports = listCacheSet;\n","var listCacheClear = require('./_listCacheClear'),\n    listCacheDelete = require('./_listCacheDelete'),\n    listCacheGet = require('./_listCacheGet'),\n    listCacheHas = require('./_listCacheHas'),\n    listCacheSet = require('./_listCacheSet');\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nmodule.exports = ListCache;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n","var Hash = require('./_Hash'),\n    ListCache = require('./_ListCache'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapCacheClear;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nmodule.exports = isKeyable;\n","var isKeyable = require('./_isKeyable');\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nmodule.exports = getMapData;\n","var getMapData = require('./_getMapData');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = mapCacheDelete;\n","var getMapData = require('./_getMapData');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nmodule.exports = mapCacheGet;\n","var getMapData = require('./_getMapData');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nmodule.exports = mapCacheHas;\n","var getMapData = require('./_getMapData');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nmodule.exports = mapCacheSet;\n","var mapCacheClear = require('./_mapCacheClear'),\n    mapCacheDelete = require('./_mapCacheDelete'),\n    mapCacheGet = require('./_mapCacheGet'),\n    mapCacheHas = require('./_mapCacheHas'),\n    mapCacheSet = require('./_mapCacheSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nmodule.exports = MapCache;\n","/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nmodule.exports = setCacheAdd;\n","/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nmodule.exports = setCacheHas;\n","var MapCache = require('./_MapCache'),\n    setCacheAdd = require('./_setCacheAdd'),\n    setCacheHas = require('./_setCacheHas');\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nmodule.exports = SetCache;\n","/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = baseFindIndex;\n","/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\nmodule.exports = baseIsNaN;\n","/**\n * A specialized version of `_.indexOf` which performs strict equality\n * comparisons of values, i.e. `===`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction strictIndexOf(array, value, fromIndex) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = strictIndexOf;\n","var baseFindIndex = require('./_baseFindIndex'),\n    baseIsNaN = require('./_baseIsNaN'),\n    strictIndexOf = require('./_strictIndexOf');\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  return value === value\n    ? strictIndexOf(array, value, fromIndex)\n    : baseFindIndex(array, baseIsNaN, fromIndex);\n}\n\nmodule.exports = baseIndexOf;\n","var baseIndexOf = require('./_baseIndexOf');\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  var length = array == null ? 0 : array.length;\n  return !!length && baseIndexOf(array, value, 0) > -1;\n}\n\nmodule.exports = arrayIncludes;\n","/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arrayIncludesWith;\n","/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nmodule.exports = cacheHas;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nmodule.exports = Set;\n","/**\n * This method returns `undefined`.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Util\n * @example\n *\n * _.times(2, _.noop);\n * // => [undefined, undefined]\n */\nfunction noop() {\n  // No operation performed.\n}\n\nmodule.exports = noop;\n","/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nmodule.exports = setToArray;\n","var Set = require('./_Set'),\n    noop = require('./noop'),\n    setToArray = require('./_setToArray');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Creates a set object of `values`.\n *\n * @private\n * @param {Array} values The values to add to the set.\n * @returns {Object} Returns the new set.\n */\nvar createSet = !(Set && (1 / setToArray(new Set([,-0]))[1]) == INFINITY) ? noop : function(values) {\n  return new Set(values);\n};\n\nmodule.exports = createSet;\n","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    cacheHas = require('./_cacheHas'),\n    createSet = require('./_createSet'),\n    setToArray = require('./_setToArray');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n */\nfunction baseUniq(array, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      length = array.length,\n      isCommon = true,\n      result = [],\n      seen = result;\n\n  if (comparator) {\n    isCommon = false;\n    includes = arrayIncludesWith;\n  }\n  else if (length >= LARGE_ARRAY_SIZE) {\n    var set = iteratee ? null : createSet(array);\n    if (set) {\n      return setToArray(set);\n    }\n    isCommon = false;\n    includes = cacheHas;\n    seen = new SetCache;\n  }\n  else {\n    seen = iteratee ? [] : result;\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var seenIndex = seen.length;\n      while (seenIndex--) {\n        if (seen[seenIndex] === computed) {\n          continue outer;\n        }\n      }\n      if (iteratee) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n    else if (!includes(seen, computed, comparator)) {\n      if (seen !== result) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseUniq;\n","var baseUniq = require('./_baseUniq');\n\n/**\n * Creates a duplicate-free version of an array, using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons, in which only the first occurrence of each element\n * is kept. The order of result values is determined by the order they occur\n * in the array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * _.uniq([2, 1, 2]);\n * // => [2, 1]\n */\nfunction uniq(array) {\n  return (array && array.length) ? baseUniq(array) : [];\n}\n\nmodule.exports = uniq;\n","const TIME = \"TIME\";\nconst CURRENT_PRICE = \"CURRENT_PRICE\";\n\nexport {\n    TIME,\n    CURRENT_PRICE\n};\n","const PRICE_CHECKING_INTERVAL = 180000;\nconst SYNCHING_INTERVAL = 120000;\nconst MAX_UNDO_REMOVED_ITEMS = 10;\nconst UNDO_REMOVED_ITEMS_TIMEOUT = 120000;\nconst DEFAULT_TITLE = \"Price Tag\";\nconst TRACKED_ITEM_TITLE = \"Price Tag - This item is being tracked\";\n\nexport {\n    DEFAULT_TITLE,\n    TRACKED_ITEM_TITLE,\n    PRICE_CHECKING_INTERVAL,\n    SYNCHING_INTERVAL,\n    MAX_UNDO_REMOVED_ITEMS,\n    UNDO_REMOVED_ITEMS_TIMEOUT\n};\n","const ITEM_STATUSES = {\n    WATCHED: \"WATCHED\",\n    NOT_FOUND: \"NOT_FOUND\",\n    INCREASED: \"INCREASED\",\n    DECREASED: \"DECREASED\",\n    ACK_DECREASE: \"ACK_DECREASE\",\n    ACK_INCREASE: \"ACK_INCREASE\",\n    FIXED: \"FIXED\"\n};\n\nconst ALL_STATUSES = Object.values(ITEM_STATUSES);\n\nexport default {\n    WATCHED: ITEM_STATUSES.WATCHED,\n    NOT_FOUND: ITEM_STATUSES.NOT_FOUND,\n    INCREASED: ITEM_STATUSES.INCREASED,\n    DECREASED: ITEM_STATUSES.DECREASED,\n    ACK_DECREASE: ITEM_STATUSES.ACK_DECREASE,\n    ACK_INCREASE: ITEM_STATUSES.ACK_INCREASE,\n    FIXED: ITEM_STATUSES.FIXED,\n    ALL_STATUSES\n}\n","const DEFAULT_ICON = \"assets/icon_48.png\";\nconst TRACKED_ITEM_ICON = \"assets/icon_active_48.png\";\nconst PRICE_UPDATE_ICON = \"./assets/time-is-money.svg\";\nconst PRICE_NOT_FOUND_ICON = \"./assets/time.svg\";\nconst PRICE_FIX_ICON = \"./assets/coin.svg\";\n\nexport {\n    DEFAULT_ICON,\n    TRACKED_ITEM_ICON,\n    PRICE_UPDATE_ICON,\n    PRICE_NOT_FOUND_ICON,\n    PRICE_FIX_ICON\n};\n","export default {\n    PRICE: /((?:\\d+[.,])?\\d+(?:[.,]\\d+)?)/,\n    HOSTNAME: /https?:\\/\\/([\\w.]+)\\/*/,\n    DOMAIN: /^([\\w-]+\\.)+[\\w-]+\\w$/,\n    URL: /^https?:\\/\\/([\\w-]+\\.)+[\\w-]+\\w(\\/[\\w-=.]+)+\\/?(\\?([\\w]+=?[\\w-%!@()\\\\[\"#\\]]+&?)*)?/,\n    CAPTURE: {\n        DOMAIN_IN_URL: /https?:\\/\\/([\\w.]+)\\/*/,\n        HOSTNAME_AND_PATH: /^https?:\\/\\/((?:[\\w-]+\\.)+[\\w-]+\\w(?:\\/[\\w-=.]+)+\\/?)/,\n        PROTOCOL_HOSTNAME_AND_PATH: /^(https?:\\/\\/(?:[\\w-]+\\.)+[\\w-]+\\w(?:\\/[\\w-=.]+)+\\/?)/\n    }\n};\n","import {DEFAULT_TITLE, TRACKED_ITEM_TITLE} from \"../../config/background\";\nimport {DEFAULT_ICON, TRACKED_ITEM_ICON} from \"../../config/assets\";\n\nfunction setDefaultAppearance() {\n    chrome.browserAction.setTitle({title: DEFAULT_TITLE});\n    chrome.browserAction.setIcon({path: DEFAULT_ICON});\n}\n\nfunction setTrackedItemAppearance() {\n    chrome.browserAction.setTitle({title: TRACKED_ITEM_TITLE});\n    chrome.browserAction.setIcon({path: TRACKED_ITEM_ICON});\n}\n\nexport {\n    setDefaultAppearance,\n    setTrackedItemAppearance\n};\n","import MATCHES from \"../constants/regexp\";\n\nfunction toPrice(price) {\n    const priceNumber = parseFloat(price.replace(\",\", \".\"));\n    const formattedPrice = priceNumber.toFixed(2);\n    return parseFloat(formattedPrice);\n}\n\nfunction matchesHostnameAndPath(string) {\n    return MATCHES.CAPTURE.HOSTNAME_AND_PATH.test(string);\n}\n\nfunction isCanonicalURLRelevant(canonical) {\n    return canonical && matchesHostnameAndPath(canonical);\n}\n\nfunction matchesDomain(string) {\n    return MATCHES.DOMAIN.test(string);\n}\n\nfunction matchesHostname(string) {\n    return MATCHES.HOSTNAME.test(string);\n}\n\nfunction matchesURL(string) {\n    return MATCHES.URL.test(string);\n}\n\nfunction parseDomainState(result, domain) {\n    return result && result[domain] && JSON.parse(result[domain]) || null;\n}\n\nfunction captureHostAndPathFromURL(url) {\n    const captureHostAndPath = url.match(MATCHES.CAPTURE.HOSTNAME_AND_PATH);\n    let hostAndPath = null;\n    if (captureHostAndPath) {\n        [, hostAndPath] = captureHostAndPath;\n    }\n    return hostAndPath;\n}\n\nfunction captureProtocolHostAndPathFromURL(url) {\n    const captureProtocolHostAndPath = url.match(MATCHES.CAPTURE.PROTOCOL_HOSTNAME_AND_PATH);\n    let protocolHostAndPath = null;\n    if (captureProtocolHostAndPath) {\n        [, protocolHostAndPath] = captureProtocolHostAndPath;\n    }\n    return protocolHostAndPath;\n}\n\nexport {\n    matchesHostnameAndPath,\n    isCanonicalURLRelevant,\n    matchesDomain,\n    matchesHostname,\n    matchesURL,\n    toPrice,\n    parseDomainState,\n    captureHostAndPathFromURL,\n    captureProtocolHostAndPathFromURL\n};\n","import {matchesDomain} from \"./lang\";\n\nfunction filterAllTrackedItems(result) {\n    let filteredResult = {};\n    for (let domain in result) {\n        if (result.hasOwnProperty(domain) && matchesDomain(domain) && result[domain]) {\n            const domainItems = JSON.parse(result[domain]);\n            filteredResult = {\n                ...filteredResult,\n                [domain]: domainItems\n            };\n        }\n    }\n    return filteredResult;\n}\n\nexport {\n    filterAllTrackedItems\n};\n","class StateFactory {\n    static createState(sortItemByType) {\n        return {\n            recordActive: false,\n            notifications: {},\n            notificationsCounter: 0,\n            autoSaveEnabled: false,\n            isPriceUpdateEnabled: false,\n            selection: null,\n            isSimilarElementHighlighted: false,\n            originalBackgroundColor: null,\n            isCurrentPageTracked: false,\n            faviconURL: null,\n            _faviconURLMap: {},\n            currentURL: null,\n            canonicalURL: null,\n            browserURL: null,\n            domain: null,\n            _sortItemsBy: sortItemByType,\n            _undoRemovedItems: [],\n            _undoRemovedItemsResetTask: null\n        };\n    }\n\n    static toggleRecord(state) {\n        return {\n            ...state,\n            recordActive: !state.recordActive\n        }\n    }\n\n    static disableRecord(state) {\n        return {\n            ...state,\n            recordActive: false\n        }\n    }\n\n    static updateCurrentDomain(state, domain) {\n        return {\n            ...state,\n            domain\n        };\n    }\n\n    static updateCurrentURL(state, currentURL) {\n        return {\n            ...state,\n            currentURL\n        };\n    }\n\n    static updateCanonicalURL(state, canonicalURL) {\n        return {\n            ...state,\n            canonicalURL\n        };\n    }\n\n    static updateBrowserURL(state, browserURL) {\n        return {\n            ...state,\n            browserURL\n        };\n    }\n\n    static enableCurrentPageTracked(state) {\n        return {\n            ...state,\n            isCurrentPageTracked: true\n        };\n    }\n\n    static disableCurrentPageTracked(state) {\n        return {\n            ...state,\n            isCurrentPageTracked: false\n        };\n    }\n\n    static updateFaviconURL(state, faviconURL) {\n        return {\n            ...state,\n            faviconURL\n        };\n    }\n\n    static updateFaviconURLMapItem(state, tabId, faviconURL) {\n        return {\n            ...state,\n            _faviconURLMap: {\n                ...state._faviconURLMap,\n                [tabId]: faviconURL\n            }\n        };\n    }\n\n    static enableAutoSave(state, selection) {\n        selection = selection || state.selection;\n        return {\n            ...state,\n            autoSaveEnabled: true,\n            selection\n        };\n    }\n\n    static disableAutoSave(state) {\n        return {\n            ...state,\n            autoSaveEnabled: false\n        };\n    }\n\n    static enablePriceUpdate(state, selection) {\n        return {\n            ...state,\n            isPriceUpdateEnabled: true,\n            selection\n        };\n    }\n\n    static disablePriceUpdate(state) {\n        return {\n            ...state,\n            isPriceUpdateEnabled: false\n        };\n    }\n\n    static setSelectionInfo(state, selection, price, faviconURL, faviconAlt) {\n        return {\n            ...state,\n            selection,\n            price,\n            faviconURL,\n            faviconAlt\n        };\n    }\n\n    static setSimilarElementHighlight(state, isSimilarElementHighlighted, originalBackgroundColor) {\n        return {\n            ...state,\n            isSimilarElementHighlighted,\n            originalBackgroundColor\n        };\n    }\n\n    static incrementNotificationsCounter(state) {\n        const notificationsCounter = state.notificationsCounter + 1;\n        return {\n            ...state,\n            notificationsCounter\n        }\n    }\n\n    static deleteNotificationsItem(state, notificationId) {\n        const newState = {...state};\n        delete newState.notifications[notificationId];\n        return newState;\n    }\n\n    static updateNotificationsItem(state, notificationId, notificationState) {\n        return {\n            ...state,\n            notifications: {\n                ...state.notifications,\n                [notificationId]: notificationState\n            }\n        };\n    }\n\n    static updateSortItemsBy(state, _sortItemsBy) {\n        return {\n            ...state,\n            _sortItemsBy\n        };\n    }\n\n    static addUndoRemovedItem(state, url, {timestamp}, maxItems) {\n        const itemRef = {url, timestamp};\n        const _undoRemovedItemsClone = [...state._undoRemovedItems];\n        _undoRemovedItemsClone.unshift(itemRef);\n        const _undoRemovedItems = _undoRemovedItemsClone.slice(0, maxItems);\n\n        return {\n            ...state,\n            _undoRemovedItems\n        };\n    }\n\n    static getUndoRemovedItemsHead(state) {\n        return state._undoRemovedItems[0];\n    }\n\n    static removeUndoRemovedItem(state) {\n        const _undoRemovedItems = [...state._undoRemovedItems];\n        _undoRemovedItems.shift();\n\n        return {\n            ...state,\n            _undoRemovedItems\n        };\n    }\n\n    static resetUndoRemovedItems(state) {\n        return {\n            ...state,\n            _undoRemovedItems: []\n        };\n    }\n\n    static setUndoRemovedItemsResetTask(state, task) {\n        return {\n            ...state,\n            _undoRemovedItemsResetTask: task\n        };\n    }\n\n    static toStorageStateFormat(state) {\n        return Object.keys(state).reduce((newState, domain) => {\n            return {\n                ...newState,\n                [domain]: JSON.stringify(state[domain])\n            }\n        }, {});\n    }\n}\n\nexport default StateFactory;\n","import {filterAllTrackedItems} from \"../../utils/storage\";\nimport {matchesDomain} from \"../../utils/lang\";\nimport StateFactory from \"../factories/state\";\n\nfunction syncStorageState() {\n    chrome.storage.local.get(null, localResult => {\n        const localState = filterAllTrackedItems(localResult);\n\n        chrome.storage.sync.get(null, syncResult => {\n                const syncState = filterAllTrackedItems(syncResult);\n                // TODO: replace this with a lodash cloneDeep !!\n                const freshState = JSON.parse(JSON.stringify(localState));\n\n                for (let syncDomain in syncState) {\n                    if (syncState.hasOwnProperty(syncDomain) && matchesDomain(syncDomain)) {\n                        const syncStateDomain = syncState[syncDomain];\n                        if (!freshState[syncDomain]) {\n                            // TODO: replace this with a lodash cloneDeep !!\n                            freshState[syncDomain] = JSON.parse(JSON.stringify(syncStateDomain));\n                        } else {\n                            for (let syncUrl in syncStateDomain) {\n                                if (syncStateDomain.hasOwnProperty(syncUrl)) {\n                                    const syncItem = syncStateDomain[syncUrl];\n                                    if (!freshState[syncDomain][syncUrl]) {\n                                        freshState[syncDomain][syncUrl] = Object.assign({}, syncItem);\n                                    } else if (syncItem.lastUpdateTimestamp > freshState[syncDomain][syncUrl].lastUpdateTimestamp) {\n                                        // TODO: replace this with a lodash cloneDeep !!\n                                        freshState[syncDomain][syncUrl] = JSON.parse(JSON.stringify(syncItem));\n                                    }\n                                }\n                            }\n                        }\n\n                    }\n                }\n\n                chrome.storage.local.set(StateFactory.toStorageStateFormat(freshState));\n                chrome.storage.sync.set(StateFactory.toStorageStateFormat(freshState));\n            }\n        );\n    });\n}\n\nexport {\n    syncStorageState\n};\n","import uniq from \"lodash/uniq\";\n\nimport ITEM_STATUS from \"../../config/item-statuses\";\n\nclass Item {\n    constructor(selection, price, previousPrice, faviconURL, faviconAlt, statuses, diffPercentage = 0) {\n        this.selection = selection;\n        this.price = price;\n        this.currentPrice = price;\n        this.startingPrice = price;\n        this.previousPrice = !previousPrice ? null : previousPrice;\n        this.faviconURL = faviconURL;\n        this.faviconAlt = faviconAlt;\n        this.timestamp = new Date().getTime();\n        this.lastUpdateTimestamp = new Date().getTime();\n        this.statuses = statuses;\n        this.diffPercentage = diffPercentage;\n    }\n\n    updateCurrentPrice(newPrice) {\n        this.previousPrice = this.currentPrice;\n        this.currentPrice = newPrice;\n\n        return this.updateDiffPercentage();\n    }\n\n    updateDiffPercentage() {\n        const diff = Math.abs(this.currentPrice - this.price) * 100 / this.price;\n        const diffPerc = parseFloat(diff.toFixed(2));\n        let diffPercentage = null;\n        if (diffPerc) {\n            diffPercentage = this.currentPrice > this.price ?\n                +diffPerc :\n                -diffPerc;\n\n            if (diffPercentage > 0 && diffPercentage < 1) {\n                diffPercentage = Math.ceil(diffPercentage);\n            } else if (diffPercentage > -1 && diffPercentage < 0) {\n                diffPercentage = Math.floor(diffPercentage);\n            }\n        }\n\n        this.diffPercentage = diffPercentage;\n    }\n\n    updateTrackStatus(newPrice, statusesToAdd, statusesToRemove, forceStartingPrice = false) {\n        if (!statusesToAdd) {\n            statusesToAdd = [];\n        }\n\n        if (!statusesToRemove) {\n            statusesToRemove = [];\n        }\n\n        this.statuses = uniq([...this.removeStatuses(statusesToRemove), ...statusesToAdd]);\n        this.lastUpdateTimestamp = new Date().getTime();\n\n        if (forceStartingPrice) {\n            this.startingPrice = this.price;\n        }\n\n        if (newPrice) {\n            this.price = newPrice;\n        }\n    }\n\n    removeStatuses(statusesToRemove = []) {\n        return statusesToRemove.length > 0 && this.statuses.length > 0 ?\n            this.statuses.filter(status => !statusesToRemove.includes(status)) :\n            this.statuses;\n    }\n\n    isWatched() {\n        return this.statuses.includes(ITEM_STATUS.WATCHED);\n    }\n\n    isNotFound() {\n        return this.statuses.includes(ITEM_STATUS.NOT_FOUND);\n    }\n\n    hasAcknowledgeDecrease() {\n        return this.statuses.includes(ITEM_STATUS.ACK_DECREASE);\n    }\n\n    hasAcknowledgeIncrease() {\n        return this.statuses.includes(ITEM_STATUS.ACK_INCREASE);\n    }\n}\n\nexport default Item;\n","import Item from \"../entities/item\";\n\nclass ItemFactory {\n    static createItem(selection, price, previousPrice, faviconURL, faviconAlt, statuses, diffPercentage) {\n        return new Item(selection, price, previousPrice, faviconURL, faviconAlt, statuses, diffPercentage);\n    }\n\n    static createItemFromObject({selection, price, previousPrice, faviconURL, faviconAlt, statuses, diffPercentage}) {\n        return new Item(selection, price, previousPrice, faviconURL, faviconAlt, statuses, diffPercentage);\n    }\n}\n\nexport default ItemFactory;\n","function sortItemsByTime({timestamp: tsA}, {timestamp: tsB}) {\n    return tsA - tsB;\n}\n\nfunction sortItemsByCurrentPrice({currentPrice: cpA}, {currentPrice: cpB}) {\n    return cpA - cpB;\n}\n\nexport default {\n    TIME: sortItemsByTime,\n    CURRENT_PRICE: sortItemsByCurrentPrice\n};\n","    function createHTMLTemplate(html) {\n    const template = document.createElement(\"template\");\n    template.innerHTML = html.trim();\n    return template.content;\n}\n\nfunction getCanonicalPathFromSource(source) {\n    const canonicalElement = source.querySelector(\"link[rel=\\\"canonical\\\"]\");\n    return canonicalElement && canonicalElement.getAttribute(\"href\");\n}\n\nfunction getFaviconPath() {\n    const nodeList = document.getElementsByTagName(\"link\");\n    for (let node of nodeList) {\n        if (node.getAttribute(\"rel\") === \"icon\" || node.getAttribute(\"rel\") === \"shortcut icon\") {\n            return node.getAttribute(\"href\");\n        }\n    }\n    return null;\n}\n\nfunction getFaviconURL() {\n    const faviconPath = getFaviconPath();\n    if (faviconPath) {\n        if (faviconPath.startsWith(location.protocol) || faviconPath.startsWith(\"//\")) {\n            return faviconPath;\n        } else if (faviconPath.startsWith(\"/\")) {\n            return `${location.protocol}//${location.hostname}${faviconPath}`;\n        } else {\n            return `${location.href}/${faviconPath}`;\n        }\n    }\n    return null;\n}\n\nexport {\n    createHTMLTemplate,\n    getCanonicalPathFromSource,\n    getFaviconURL\n};\n","function buildSaveConfirmationPayload(currentURL, similarURL) {\n    return {\n        title: \"Item with similar URL to existing one\",\n        message: \"It appears that the item URL you're trying to save:<br>\" +\n            `<i><a href=\"${currentURL}\" target=\"_blank\" rel=\"noopener noreferrer\">${currentURL}</a></i><br>` +\n            \"is pretty similar to<br>\" +\n            `<i><a href=\"${similarURL}\" target=\"_blank\" rel=\"noopener noreferrer\">${similarURL}</a></i><br><br>` +\n            \"Since your choice will affect the way items are tracked in this site futurely,<br>please help us helping you by choosing carefully one of the following options:\",\n        buttons: [\n            \"It's not, save it! Remember this option for this site.\",\n            \"Don't save. Ask me again for items of this site!\",\n            \"Indeed the same item. Don't save! Remember this option for this site. (Use just URL path for accessing items)\",\n            \"For now save this item. Ask me again next time!\"\n        ]\n    };\n}\n\nfunction buildURLConfirmationPayload(canonicalURL, browserURL, domain) {\n    return {\n        title: \"This website recommends to follow this item through a different URL\",\n        message: `<u>${domain}</u> says that a more accurate URL for this item would be:<br>` +\n            `<i><a href=\"${canonicalURL}\" target=\"_blank\"  rel=\"noopener noreferrer\">${canonicalURL}</a></i><br>` +\n            \"If this is correct, we recommend you to follow it.<br><br>\" +\n            \"<b>However</b> you can still opt to choose following the current browser URL:<br>\" +\n            `<i><a href=\"${browserURL}\" target=\"_blank\" rel=\"noopener noreferrer\">${browserURL}</a></i><br><br>` +\n            \"Since your choice will affect the way items are tracked in this site futurely,<br>please help us helping you by choosing carefully one of the following options:\",\n        buttons: [\n            \"Use recommended URL. Remember this option for this site\",\n            \"Use recommended URL but just this time\",\n            \"It's not correct, use the current browser URL. Remember this option\",\n            \"Don't use recommended URL. Use the current browser URL instead but just this time\"\n        ]\n    };\n}\n\nexport {\n    buildSaveConfirmationPayload,\n    buildURLConfirmationPayload\n};\n","import uniq from \"lodash/uniq\";\nimport * as SORT_BY_TYPES from \"./src/config/sort-tracked-items\";\nimport {TIME as SORT_ITEMS_BY_TIME} from \"./src/config/sort-tracked-items\";\nimport {\n    PRICE_CHECKING_INTERVAL,\n    SYNCHING_INTERVAL,\n    MAX_UNDO_REMOVED_ITEMS,\n    UNDO_REMOVED_ITEMS_TIMEOUT\n} from \"./src/config/background\";\nimport ITEM_STATUS from \"./src/config/item-statuses\";\nimport {\n    PRICE_UPDATE_ICON,\n    PRICE_NOT_FOUND_ICON,\n    PRICE_FIX_ICON\n} from \"./src/config/assets\";\nimport MATCHES from \"./src/constants/regexp\";\nimport {\n    setDefaultAppearance,\n    setTrackedItemAppearance\n} from \"./src/core/events/appearance\";\nimport {\n    syncStorageState\n} from \"./src/core/events/storage\";\nimport StateFactory from \"./src/core/factories/state\";\nimport ItemFactory from \"./src/core/factories/item\";\nimport sortTrackedItemsBy from \"./src/utils/sort-tracked-items\";\nimport {createHTMLTemplate, getCanonicalPathFromSource} from \"./src/utils/dom\";\nimport {\n    toPrice,\n    isCanonicalURLRelevant,\n    matchesDomain,\n    matchesHostname,\n    matchesURL,\n    parseDomainState,\n    captureHostAndPathFromURL,\n    captureProtocolHostAndPathFromURL\n} from \"./src/utils/lang\";\nimport {\n    buildSaveConfirmationPayload,\n    buildURLConfirmationPayload\n} from \"./src/utils/view\";\n\nlet State = StateFactory.createState(SORT_ITEMS_BY_TIME);\n\nfunction removeStatuses(item, statusesToRemove = []) {\n    return statusesToRemove.length > 0 && item.statuses.length > 0 ?\n        item.statuses.filter(status => !statusesToRemove.includes(status)) :\n        item.statuses;\n}\n\nfunction updateItemDiffPercentage(item) {\n    const diff = Math.abs(item.currentPrice - item.price) * 100 / item.price;\n    const diffPerc = parseFloat(diff.toFixed(2));\n    let diffPercentage = null;\n    if (diffPerc) {\n        diffPercentage = item.currentPrice > item.price ?\n            +diffPerc :\n            -diffPerc;\n\n        if (diffPercentage > 0 && diffPercentage < 1) {\n            diffPercentage = Math.ceil(diffPercentage);\n        } else if (diffPercentage > -1 && diffPercentage < 0) {\n            diffPercentage = Math.floor(diffPercentage);\n        }\n    }\n\n    item.diffPercentage = diffPercentage;\n\n    return item;\n}\n\nfunction updateItemTrackStatus(item, newPrice, statusesToAdd, statusesToRemove, forceStartingPrice = false) {\n    if (!statusesToAdd) {\n        statusesToAdd = [];\n    }\n\n    if (!statusesToRemove) {\n        statusesToRemove = [];\n    }\n\n    const statuses = uniq([...removeStatuses(item, statusesToRemove), ...statusesToAdd]);\n    const updatedItem = {\n        ...item,\n        statuses,\n        lastUpdateTimestamp: new Date().getTime()\n    };\n\n    if (forceStartingPrice) {\n        updatedItem.startingPrice = item.price;\n    }\n\n    if (newPrice) {\n        updatedItem.price = newPrice;\n    }\n\n    return updatedItem;\n}\n\nfunction onConfirmURLForCreateItemAttempt(tabId, domain, url, selection, price, faviconURL, faviconAlt, callback) {\n    const modalElementId = \"price-tag--url-confirmation\";\n    chrome.tabs.sendMessage(tabId, {\n        type: \"CONFIRMATION_DISPLAY.CREATE\",\n        payload: {elementId: modalElementId}\n    }, ({status}) => {\n        if (status === 1) {\n            const payload = buildURLConfirmationPayload(State.canonicalURL, State.browserURL, domain);\n            chrome.tabs.sendMessage(tabId, {\n                type: \"CONFIRMATION_DISPLAY.LOAD\",\n                payload\n            }, ({status, index}) => {\n                chrome.tabs.sendMessage(tabId, {\n                    type: \"CONFIRMATION_DISPLAY.REMOVE\",\n                    payload: {elementId: modalElementId}\n                });\n\n                switch (status) {\n                    case 1:\n                        switch (index) {\n                            case 0:\n                                // said Yes, can use canonical and remember this option\n                                chrome.storage.local.get([domain], result => {\n                                    const domainState = result && result[domain] && JSON.parse(result[domain]) || {};\n                                    domainState._canUseCanonical = true;\n                                    chrome.storage.local.set({[domain]: JSON.stringify(domainState)});\n                                    State = StateFactory.updateCurrentURL(State, State.canonicalURL);\n                                    callback(true, true);\n                                });\n                                break;\n                            case 1:\n                                // said Yes, but use canonical just this time\n                                State = StateFactory.updateCurrentURL(State, State.canonicalURL);\n                                callback(true, true);\n                                break;\n                            case 2:\n                                // said No, use browser URL and remember this option\n                                chrome.storage.local.get([domain], result => {\n                                    const domainState = result && result[domain] && JSON.parse(result[domain]) || {};\n                                    domainState._canUseCanonical = false;\n                                    chrome.storage.local.set({[domain]: JSON.stringify(domainState)});\n                                    State = StateFactory.updateCurrentURL(State, State.browserURL);\n                                    callback(true, false);\n                                });\n                                break;\n                            case 3:\n                                // said No, use browser URL but ask again\n                                State = StateFactory.updateCurrentURL(State, State.browserURL);\n                                callback(true, false);\n                                break;\n                            default:\n                                // cannot recognize this modal button click\n                                callback(false);\n                                break;\n                        }\n                        break;\n                    case 2:\n                        // close modal\n                        callback(false);\n                        break;\n                    default:\n                        callback(false);\n                        break;\n                }\n            });\n        }\n    });\n}\n\nfunction onRecordDone(tabId, payload) {\n    const {status, selection, price, faviconURL, faviconAlt} = payload;\n    const {currentURL, domain} = State;\n    if (status > 0) {\n        State = StateFactory.updateFaviconURL(State, State.faviconURL || faviconURL);\n        canDisplayURLConfirmation(State, domain, canDisplay => {\n            if (canDisplay) {\n                onConfirmURLForCreateItemAttempt(tabId, domain, currentURL, selection, price, faviconURL, faviconAlt, (canSave, useCaninocal) => {\n                    if (canSave) {\n                        const url = useCaninocal ? State.canonicalURL : State.browserURL;\n                        checkForURLSimilarity(tabId, domain, url, isToSave => {\n                            if (isToSave) {\n                                createItem(domain, url, selection, price, State.faviconURL, faviconAlt, [ITEM_STATUS.WATCHED]);\n                                updateExtensionAppearance(domain, url, true);\n                            }\n                        });\n                    }\n                });\n            } else {\n                checkForURLSimilarity(tabId, domain, currentURL, isToSave => {\n                    if (isToSave) {\n                        createItem(domain, currentURL, selection, price, State.faviconURL, faviconAlt, [ITEM_STATUS.WATCHED]);\n                        updateExtensionAppearance(domain, currentURL, true);\n                    }\n                });\n            }\n        });\n\n        State = StateFactory.disableRecord(State);\n    }\n}\n\nfunction onRecordCancel() {\n    State = StateFactory.disableRecord(State);\n}\n\nfunction onAutoSaveCheckStatus(sendResponse, {status, selection, price, faviconURL, faviconAlt} = {}) {\n    if (status >= 0) {\n        State = StateFactory.updateFaviconURL(State, State.faviconURL || faviconURL);\n        State = StateFactory.setSelectionInfo(State, selection, price, State.faviconURL, faviconAlt);\n        sendResponse(true);\n    } else {\n        sendResponse(false);\n    }\n}\n\nfunction onPriceUpdateCheckStatus(sendResponse, trackedPrice, {status, selection, price, faviconURL, faviconAlt} = {}) {\n    if (status >= 0) {\n        State = StateFactory.updateFaviconURL(State, State.faviconURL || faviconURL);\n        State = StateFactory.setSelectionInfo(State, selection, price, State.faviconURL, faviconAlt);\n        if (toPrice(price) !== trackedPrice) {\n            sendResponse(true);\n            return;\n        }\n    }\n\n    sendResponse(false);\n}\n\nfunction onSimilarElementHighlight({status, isHighlighted: isSimilarElementHighlighted, originalBackgroundColor = null}) {\n    if (status >= 0) {\n        State = StateFactory.setSimilarElementHighlight(State, isSimilarElementHighlighted, originalBackgroundColor);\n    }\n}\n\n// TODO: price becomes a class\nfunction createItem(domain, url, selection, price, faviconURL, faviconAlt, statuses, callback) {\n    chrome.storage.local.get([domain], result => {\n        const items = result && result[domain] ? JSON.parse(result[domain]) : {};\n        items[url] = ItemFactory.createItem(selection, toPrice(price), null, faviconURL, faviconAlt, statuses);\n\n        chrome.storage.local.set({[domain]: JSON.stringify(items)}, () => {\n            State = StateFactory.disableAutoSave(State);\n            if (callback) {\n                callback();\n            }\n            // TODO: sendResponse(\"done\"); // foi gravado ou no\n        });\n    });\n}\n\nfunction canDisplayURLConfirmation(state, domain, callback) {\n    chrome.storage.local.get([domain], result => {\n        const domainState = result && result[domain] && JSON.parse(result[domain]) || null;\n        const isUseCanonicalPrefUnset = !domainState || domainState._canUseCanonical === undefined;\n        callback(isUseCanonicalPrefUnset && !!state.canonicalURL &&\n            state.canonicalURL !== state.browserURL);\n    });\n}\n\nfunction checkForPriceChanges() {\n    chrome.storage.local.get(null, result => {\n        for (let domain in result) {\n            if (result.hasOwnProperty(domain) && matchesDomain(domain)) {\n                const domainItems = JSON.parse(result[domain]);\n\n                for (let url in domainItems) {\n                    if (domainItems.hasOwnProperty(url) && matchesURL(url)) {\n                        const item = ItemFactory.createItemFromObject(domainItems[url]);\n                        if (item.isWatched()) {\n                            const {price: targetPrice, currentPrice} = item;\n                            onXHR(url, template => {\n                                try {\n                                    let newPrice = null;\n                                    const {textContent} = template.querySelector(domainItems[url].selection);\n                                    if (textContent) {\n                                        const textContentMatch = textContent.match(MATCHES.PRICE);\n                                        if (textContentMatch) {\n                                            [, newPrice] = textContentMatch;\n\n                                            newPrice = toPrice(newPrice);\n\n                                            if (!targetPrice) {\n                                                item.updateTrackStatus(newPrice,\n                                                    [ITEM_STATUS.FIXED], [ITEM_STATUS.NOT_FOUND]);\n                                                domainItems[url] = item;\n                                                chrome.storage.local.set({[domain]: JSON.stringify(domainItems)}, () => {\n                                                    const notificationId = `TRACK.PRICE_FIXED-${State.notificationsCounter}`;\n                                                    createNotification(notificationId, PRICE_FIX_ICON, \"Fixed price\",\n                                                        `Ermm.. We've just fixed a wrongly set price to ${newPrice}`, url, url, domain);\n                                                });\n                                            } else if (newPrice < currentPrice) {\n                                                item.updateCurrentPrice(newPrice);\n                                                item.updateTrackStatus(null,\n                                                    [ITEM_STATUS.DECREASED],\n                                                    [ITEM_STATUS.INCREASED, ITEM_STATUS.NOT_FOUND, ITEM_STATUS.ACK_DECREASE]);\n                                                domainItems[url] = item;\n\n                                                chrome.storage.local.set({[domain]: JSON.stringify(domainItems)}, () => {\n                                                    // TODO: sendResponse(\"done\"); // foi actualizado ou no\n                                                    if (newPrice < targetPrice && !item.hasAcknowledgeDecrease()) {\n                                                        const notificationId = `TRACK.PRICE_UPDATE-${State.notificationsCounter}`;\n                                                        createNotification(notificationId, PRICE_UPDATE_ICON, \"Lower price!!\",\n                                                            `${newPrice} (previous ${targetPrice})`, url, url, domain, ITEM_STATUS.DECREASED,\n                                                            {\n                                                                buttons: [\n                                                                    {\n                                                                        title: `Keep tracking but w/ new price (${newPrice})`\n                                                                    },\n                                                                    {\n                                                                        title: \"Stop watching\"\n                                                                    }\n                                                                ]\n                                                            });\n                                                    }\n                                                });\n                                            } else if (newPrice > currentPrice) {\n                                                item.updateCurrentPrice(newPrice); // update current price and previous\n                                                item.updateTrackStatus(null,\n                                                    [ITEM_STATUS.INCREASED],\n                                                    [ITEM_STATUS.DECREASED, ITEM_STATUS.NOT_FOUND, ITEM_STATUS.ACK_INCREASE]);\n\n                                                domainItems[url] = item;\n                                                chrome.storage.local.set({[domain]: JSON.stringify(domainItems)}, () => {\n                                                    // TODO: sendResponse(\"done\"); // foi actualizado ou no\n\n                                                    if (!item.hasAcknowledgeIncrease()) {\n                                                        const notificationId = `TRACK.PRICE_UPDATE-${State.notificationsCounter}`;\n                                                        const notificationOptions = domainItems[url].price !== domainItems[url].previousPrice ?\n                                                            {\n                                                                buttons: [\n                                                                    {\n                                                                        title: `Increase interest price to the previous (${domainItems[url].previousPrice})`\n                                                                    }\n                                                                ]\n                                                            } :\n                                                            {\n                                                                buttons: []\n                                                            };\n                                                        notificationOptions.buttons.push(\n                                                            {\n                                                                title: \"Stop watching\"\n                                                            }\n                                                        );\n                                                        createNotification(notificationId, PRICE_UPDATE_ICON, \"Price increase\",\n                                                            `${newPrice} (previous ${domainItems[url].previousPrice})`, url, url, domain, ITEM_STATUS.INCREASED,\n                                                            notificationOptions);\n                                                    }\n                                                });\n                                            } else if (!item.isNotFound()) { // NOTE: Here, price is the same\n                                                item.updateTrackStatus(null,\n                                                    null, [ITEM_STATUS.NOT_FOUND]);\n                                                domainItems[url] = item;\n                                                chrome.storage.local.set({[domain]: JSON.stringify(domainItems)}, () => {\n                                                    // TODO: sendResponse(\"done\"); // foi actualizado ou no\n                                                });\n                                            } else {\n                                                item.updateTrackStatus(null,\n                                                    null, [ITEM_STATUS.NOT_FOUND]);\n                                                domainItems[url] = item;\n                                                chrome.storage.local.set({[domain]: JSON.stringify(domainItems)});\n                                            }\n                                        }\n                                    }\n\n                                    if (item.price && !newPrice) {\n                                        if (!item.isNotFound()) {\n                                            item.updateTrackStatus(null,\n                                                [ITEM_STATUS.NOT_FOUND],\n                                                [ITEM_STATUS.DECREASED, ITEM_STATUS.INCREASED, ITEM_STATUS.FIXED, ITEM_STATUS.ACK_DECREASE]);\n                                            domainItems[url] = item;\n                                            chrome.storage.local.set({[domain]: JSON.stringify(domainItems)}, () => {\n                                                // TODO: sendResponse(\"done\"); // foi actualizado ou no\n                                                const notificationId = `TRACK.PRICE_NOT_FOUND-${State.notificationsCounter}`;\n                                                const previousPrice = targetPrice ? ` (previous ${targetPrice})` : \"\";\n                                                createNotification(notificationId, PRICE_NOT_FOUND_ICON, \"Price gone\",\n                                                    `Price tag no longer found${previousPrice}`, url, url, domain);\n                                            });\n                                        }\n                                    }\n                                } catch (e) {\n                                    if (!item.isNotFound()) {\n                                        console.warn(`Invalid price selection element in\\n${url}:\\t\"${domainItems[url].selection}\"`);\n                                        item.updateTrackStatus(null,\n                                            [ITEM_STATUS.NOT_FOUND],\n                                            [ITEM_STATUS.DECREASED, ITEM_STATUS.INCREASED, ITEM_STATUS.FIXED, ITEM_STATUS.ACK_DECREASE]);\n                                        domainItems[url] = item;\n\n                                        chrome.storage.local.set({[domain]: JSON.stringify(domainItems)}, () => {\n                                            const notificationId = `TRACK.PRICE_NOT_FOUND-${State.notificationsCounter}`;\n                                            const previousPrice = targetPrice ? ` (previous ${targetPrice})` : \"\";\n                                            createNotification(notificationId, PRICE_NOT_FOUND_ICON, \"Price gone\",\n                                                `Price tag no longer found${previousPrice}`, url, url, domain);\n                                        });\n                                    }\n                                }\n                            });\n                        }\n                    }\n                }\n            }\n        }\n    });\n}\n\nfunction getTrackedItemsSortedBy(sortType, callback) {\n    chrome.storage.local.get(null, result => {\n        let trackedItems = [];\n        Object.keys(result).forEach(key => {\n            if (matchesDomain(key)) {\n                const domainData = result[key];\n                const domainItems = JSON.parse(domainData) || null;\n                if (domainItems) {\n                    let items = [];\n                    Object.keys(domainItems).forEach(url => {\n                        if (matchesHostname(url)) {\n                            const item = ItemFactory.createItemFromObject(domainItems[url]);\n                            if (item.isWatched()) {\n                                items.push({\n                                    ...item,\n                                    url\n                                });\n                            }\n                        }\n                    });\n                    trackedItems = [...trackedItems, ...items];\n                }\n            }\n        });\n        const sortByFn = sortTrackedItemsBy[sortType];\n        trackedItems.sort(sortByFn);\n        callback(trackedItems);\n    });\n}\n\nfunction removeTrackedItem(url, currentURL, callback) {\n    let found = false;\n    chrome.storage.local.get(null, result => {\n        Object.keys(result).forEach(domain => {\n            if (matchesDomain(domain)) {\n                const domainData = result[domain];\n                const domainItems = JSON.parse(domainData) || null;\n                if (domainItems[url]) {\n                    found = true;\n\n                    if (State._undoRemovedItemsResetTask) {\n                        clearTimeout(State._undoRemovedItemsResetTask);\n                        State = StateFactory.setUndoRemovedItemsResetTask(State, null);\n                    }\n\n                    const removedItem = {...domainItems[url]};\n                    State = StateFactory.addUndoRemovedItem(State, url, removedItem, MAX_UNDO_REMOVED_ITEMS);\n                    chrome.runtime.sendMessage({\n                        type: \"TRACKED_ITEMS.UNDO_STATUS\",\n                        payload: {isUndoStatusActive: true}\n                    });\n\n                    const undoRemovedItemsTask = setTimeout(() => {\n                        State = StateFactory.resetUndoRemovedItems(State);\n                        chrome.runtime.sendMessage({\n                            type: \"TRACKED_ITEMS.UNDO_STATUS\",\n                            payload: {isUndoStatusActive: false}\n                        });\n                    }, UNDO_REMOVED_ITEMS_TIMEOUT);\n\n                    State = StateFactory.setUndoRemovedItemsResetTask(State, undoRemovedItemsTask);\n\n                    domainItems[url] = updateItemTrackStatus(domainItems[url], null, null, [ITEM_STATUS.WATCHED]); // stop watching\n                    chrome.storage.local.set({[domain]: JSON.stringify(domainItems)}, () => {\n                        if (currentURL === url) {\n                            updateAutoSaveStatus(url, domain);\n                            updatePriceUpdateStatus(url, domain);\n                            updateExtensionAppearance(domain, url, false);\n                        }\n                        callback(true);\n                    });\n                }\n            }\n        });\n        if (!found) {\n            callback(false);\n        }\n    });\n}\n\nfunction undoRemoveTrackedItem(url, currentURL, callback) {\n    let found = false;\n    chrome.storage.local.get(null, result => {\n        Object.keys(result).forEach(domain => {\n            if (matchesDomain(domain)) {\n                const domainData = result[domain];\n                const domainItems = JSON.parse(domainData) || null;\n                if (domainItems[url]) {\n                    found = true;\n\n                    domainItems[url] = updateItemTrackStatus(domainItems[url], null, [ITEM_STATUS.WATCHED], null); // start watch again\n                    chrome.storage.local.set({[domain]: JSON.stringify(domainItems)}, () => {\n                        if (currentURL === url) {\n                            updateAutoSaveStatus(url, domain);\n                            updatePriceUpdateStatus(url, domain);\n                            updateExtensionAppearance(domain, url, true);\n                        }\n                        callback(true);\n                    });\n                }\n            }\n        });\n        if (!found) {\n            // No special treatment if item is not found; we can't undo nothing\n            callback(true);\n        }\n    });\n}\n\nfunction clearNotification(notifId, wasClosedByUser) {\n    chrome.notifications.clear(notifId, wasClickedByUser => {\n        if (wasClickedByUser || wasClosedByUser) {\n            const {domain, url, type} = State.notifications[notifId];\n            chrome.storage.local.get([domain], result => {\n                const domainItems = result && result[domain] ? JSON.parse(result[domain]) : null;\n                switch (type) {\n                    case ITEM_STATUS.DECREASED:\n                        domainItems[url] = updateItemTrackStatus(domainItems[url], null, [ITEM_STATUS.ACK_DECREASE]);\n                        break;\n                    case ITEM_STATUS.INCREASED:\n                        domainItems[url] = updateItemTrackStatus(domainItems[url], null, [ITEM_STATUS.ACK_INCREASE]);\n                        break;\n                }\n\n                chrome.storage.local.set({[domain]: JSON.stringify(domainItems)});\n            });\n        }\n\n        State = StateFactory.deleteNotificationsItem(State, notifId);\n    });\n}\n\nfunction createNotification(notifId, iconUrl, title, message, contextMessage = \"\", url, domain, type, extraOptions = {}) {\n    const options = {\n        type: \"basic\",\n        title,\n        message,\n        iconUrl,\n        contextMessage,\n        requireInteraction: true,\n        ...extraOptions\n    };\n\n    chrome.notifications.create(notifId, options, id => {\n        State = StateFactory.updateNotificationsItem(State, id, {\n            url,\n            domain,\n            type\n        });\n    });\n\n    State = StateFactory.incrementNotificationsCounter(State);\n}\n\nfunction setupTrackingPolling() {\n    checkForPriceChanges();\n    setInterval(checkForPriceChanges, PRICE_CHECKING_INTERVAL);\n}\n\nfunction updateAutoSaveStatus(url, domain, fullURL) {\n    chrome.storage.local.get([domain], result => {\n        const items = result && result[domain] ? JSON.parse(result[domain]) : {};\n        const item = items[url] && ItemFactory.createItemFromObject(items[url]);\n        const itemFallback = items[fullURL] && ItemFactory.createItemFromObject(items[fullURL]);\n\n        const isItemDefinedAndWatched = (item && item.isWatched()) ||\n            (itemFallback && itemFallback.isWatched());\n        if (items && !isItemDefinedAndWatched) {\n            const urlFromDomain = Object.keys(items)[0];\n            const exampleFromDomain = items[urlFromDomain] && ItemFactory.createItemFromObject(items[urlFromDomain]);\n            if (exampleFromDomain && exampleFromDomain.selection) {\n                State = StateFactory.enableAutoSave(State, exampleFromDomain.selection);\n            }\n        } else {\n            State = StateFactory.disableAutoSave(State);\n        }\n    });\n}\n\nfunction updatePriceUpdateStatus(url, domain) {\n    chrome.storage.local.get([domain], result => {\n        const items = result && result[domain] ? JSON.parse(result[domain]) : {};\n        const item = items[url];\n        const hasItemPriceIncOrDec = item && item.price !== item.currentPrice;\n        if (hasItemPriceIncOrDec) {\n            State = StateFactory.enablePriceUpdate(State, item.selection);\n        } else {\n            State = StateFactory.disablePriceUpdate(State);\n        }\n    });\n}\n\nfunction updateExtensionAppearance(currentDomain, currentURL, forcePageTrackingTo, fullURL) {\n    if (forcePageTrackingTo === true) {\n        setTrackedItemAppearance();\n        State = StateFactory.enableCurrentPageTracked(State);\n    } else if (forcePageTrackingTo === false) {\n        setDefaultAppearance();\n        State = StateFactory.disableCurrentPageTracked(State);\n    } else if (!forcePageTrackingTo) {\n        chrome.storage.local.get([currentDomain], result => {\n            const domainState = parseDomainState(result, currentDomain);\n            if (domainState) {\n                // NOTE: Making sure that full URL is also checked because item may have been saved with full URL\n                // in the past\n                const itemObject = domainState[currentURL] || domainState[fullURL];\n                const item = itemObject && ItemFactory.createItemFromObject(itemObject);\n                if (item && item.isWatched()) {\n                    setTrackedItemAppearance();\n                    State = StateFactory.enableCurrentPageTracked(State);\n                } else {\n                    setDefaultAppearance();\n                    State = StateFactory.disableCurrentPageTracked(State);\n                }\n            } else {\n                setDefaultAppearance();\n                State = StateFactory.disableCurrentPageTracked(State);\n            }\n        });\n    }\n}\n\nfunction searchForEqualPathWatchedItem(domainState, currentURL, callback) {\n    const currentHostAndPath = captureHostAndPathFromURL(currentURL);\n    let foundOne = false;\n    for (let url in domainState) {\n        if (domainState.hasOwnProperty(url) && matchesURL(url)) {\n            const item = ItemFactory.createItemFromObject(domainState[url]);\n            if (item.isWatched()) {\n                if (currentURL === url) {\n                    //    if they're exactly the same\n                    callback(null);\n                    return;\n                } else {\n                    const hostAndPath = captureHostAndPathFromURL(url);\n                    if (hostAndPath === currentHostAndPath) {\n                        foundOne = foundOne === false;\n                        callback(url);\n                        return;\n                    }\n                }\n            }\n        }\n    }\n\n    callback(null);\n}\n\nfunction checkForURLSimilarity(tabId, domain, currentURL, callback) {\n    chrome.storage.local.get([domain], result => {\n        const domainState = result && result[domain] && JSON.parse(result[domain]) || null;\n        if (domainState) {\n            if (domainState._isPathEnoughToTrack === true) {\n                // since it's true we can say that that domain items' path is enough to track items in this domain\n                searchForEqualPathWatchedItem(domainState, currentURL, similarURL => {\n                    if (similarURL) {\n                        callback(false, false);\n                    } else {\n                        callback(true);\n                    }\n                });\n            } else if (domainState._isPathEnoughToTrack === false) {\n                callback(true);\n            } else {\n                // it's the first time user is being inquired about items similarity in this domain\n                searchForEqualPathWatchedItem(domainState, currentURL, similarURL => {\n                    if (similarURL) {\n                        // found an URL whose host and path are equals to the currentURL trying to be saved\n                        // prompt user to confirm if the item is the same\n\n                        const modalElementId = \"price-tag--save-confirmation\";\n                        chrome.tabs.sendMessage(tabId, {\n                            type: \"CONFIRMATION_DISPLAY.CREATE\",\n                            payload: {elementId: modalElementId}\n                        }, ({status}) => {\n                            if (status === 1) {\n                                const payload = buildSaveConfirmationPayload(currentURL, similarURL);\n                                chrome.tabs.sendMessage(tabId, {\n                                    type: \"CONFIRMATION_DISPLAY.LOAD\",\n                                    payload\n                                }, ({status, index}) => {\n                                    chrome.tabs.sendMessage(tabId, {\n                                        type: \"CONFIRMATION_DISPLAY.REMOVE\",\n                                        payload: {elementId: modalElementId}\n                                    });\n                                    switch (status) {\n                                        case 1:\n                                            switch (index) {\n                                                case 0:\n                                                    // said Yes: not the same item\n                                                    domainState._isPathEnoughToTrack = false;\n                                                    chrome.storage.local.set({[domain]: JSON.stringify(domainState)});\n                                                    callback(true);\n                                                    break;\n                                                case 1:\n                                                    callback(false, true);\n                                                    break;\n                                                case 2:\n                                                    // said No: same item (path is enough for this site items)\n                                                    domainState._isPathEnoughToTrack = true;\n                                                    chrome.storage.local.set({[domain]: JSON.stringify(domainState)});\n                                                    callback(false, false);\n                                                    break;\n                                                case 3:\n                                                    // said Save this but for others Ask me later\n                                                    callback(true);\n                                                    break;\n                                                default:\n                                                    // cannot recognize this modal button click\n                                                    callback(false, true);\n                                                    break;\n                                            }\n                                            break;\n                                        case 2:\n                                            // close modal\n                                            callback(false, true);\n                                            break;\n                                        default:\n                                            // something wrong with modal interaction\n                                            callback(false, true);\n                                            break;\n                                    }\n                                });\n                            } else {\n                                // something went wrong creating the modal\n                                callback(false, true);\n                            }\n                        });\n                    }\n                    else {\n                        // no URL has host and path equals to the currentURL (can save the item)\n                        callback(true);\n                    }\n                });\n            }\n        } else {\n            // this means it's the first item being saved belonging to this domain (can save the item)\n            callback(true);\n        }\n    });\n}\n\nfunction onXHR(url, callback) {\n    const request = new XMLHttpRequest();\n    request.onload = function () {\n        const template = createHTMLTemplate(this.response);\n        callback(template);\n    };\n    request.open(\"GET\", url);\n    request.send();\n\n}\n\nfunction onTabContextChange(tabId, url) {\n    const captureDomain = url.match(MATCHES.CAPTURE.DOMAIN_IN_URL);\n    if (captureDomain) {\n        const [, domain] = captureDomain;\n        State = StateFactory.updateCurrentDomain(State, domain);\n        chrome.storage.local.get([domain], result => {\n            const domainState = result && result[domain] && JSON.parse(result[domain]) || null;\n            // check if user has already a preference to use the canonical URL if available\n            if (domainState && domainState._canUseCanonical === false) {\n                State = StateFactory.updateCanonicalURL(State, null);\n                State = StateFactory.updateCurrentURL(State, url);\n                State = StateFactory.updateBrowserURL(State, url);\n\n                if (domainState._isPathEnoughToTrack === true) {\n                    const protocolHostAndPathFromURL = captureProtocolHostAndPathFromURL(url);\n                    if (protocolHostAndPathFromURL) {\n                        State = StateFactory.updateCurrentURL(State, protocolHostAndPathFromURL);\n                        State = StateFactory.updateBrowserURL(State, protocolHostAndPathFromURL);\n                    }\n                }\n\n                updateAutoSaveStatus(State.currentURL, State.domain, url);\n                updatePriceUpdateStatus(State.currentURL, State.domain);\n                updateExtensionAppearance(State.domain, State.currentURL, null, url);\n            } else {\n                // First thing to do, check:\n                // If canonical was updated (compared to the previously) + if it's relevant\n                State = StateFactory.updateBrowserURL(State, url);\n\n                onXHR(url, template => {\n                    const canonicalURL = getCanonicalPathFromSource(template);\n                    const canUseCanonical = isCanonicalURLRelevant(canonicalURL);\n\n                    if (canUseCanonical) {\n                        State = StateFactory.updateCurrentURL(State, canonicalURL);\n                        State = StateFactory.updateCanonicalURL(State, canonicalURL);\n                    } else {\n                        State = StateFactory.updateCanonicalURL(State, null);\n                        State = StateFactory.updateCurrentURL(State, url);\n\n                        if (domainState && domainState._isPathEnoughToTrack === true) {\n                            const protocolHostAndPathFromURL = captureProtocolHostAndPathFromURL(url);\n                            if (protocolHostAndPathFromURL) {\n                                State = StateFactory.updateCurrentURL(State, protocolHostAndPathFromURL);\n                                State = StateFactory.updateBrowserURL(State, protocolHostAndPathFromURL);\n                            }\n                        }\n                    }\n\n                    updateAutoSaveStatus(State.currentURL, State.domain, url);\n                    updatePriceUpdateStatus(State.currentURL, State.domain);\n                    updateExtensionAppearance(State.domain, State.currentURL, null, url);\n                });\n            }\n        });\n    }\n}\n\n// TODO: break this down into smaller functions\nfunction attachEvents() {\n    chrome.runtime.onInstalled.addListener(() => {\n        console.log(\"Price tag installed.\");\n    });\n\n    chrome.tabs.onActivated.addListener(() => {\n        chrome.tabs.query({active: true, currentWindow: true}, ([{id, url}]) => {\n            if (url.startsWith(\"http\")) {\n                onTabContextChange(id, url);\n                State = StateFactory.updateFaviconURL(State, State._faviconURLMap[id] || null);\n            } else {\n                setDefaultAppearance();\n            }\n        });\n    });\n\n    chrome.tabs.onUpdated.addListener((tabId, {favIconUrl}, {active, url}) => {\n        if (url.startsWith(\"http\")) {\n            if (active) {\n                if (favIconUrl) {\n                    State = StateFactory.updateFaviconURLMapItem(State, tabId, favIconUrl);\n                    State = StateFactory.updateFaviconURL(State, favIconUrl);\n                }\n            }\n        } else {\n            setDefaultAppearance();\n        }\n    });\n\n    chrome.webNavigation.onCompleted.addListener(({frameId}) => {\n        if (frameId === 0) {\n            chrome.tabs.query({active: true, currentWindow: true}, (tabs) => {\n                if (tabs.length > 0) {\n                    const [{id, url}] = tabs;\n                    onTabContextChange(id, url);\n                }\n            });\n        }\n    });\n\n    chrome.webNavigation.onHistoryStateUpdated.addListener(() => {\n        chrome.tabs.query({active: true, currentWindow: true}, (tabs) => {\n            if (tabs.length > 0) {\n                const [{id: tabId, url}] = tabs;\n                if (url !== undefined && url !== State.browserURL) {\n                    onTabContextChange(tabId, url);\n                }\n            }\n        });\n    });\n\n    chrome.runtime.onMessage.addListener(\n        ({type, payload = {}}, sender, sendResponse) => {\n            let isUndoStatusActive;\n            const {id, url: itemUrl, sortByType} = payload;\n            const {recordActive, autoSaveEnabled, isPriceUpdateEnabled, currentURL: url, domain} = State;\n            switch (type) {\n                case \"POPUP.STATUS\":\n                    sendResponse({status: 1, state: {recordActive, autoSaveEnabled, isPriceUpdateEnabled}});\n                    break;\n                case \"RECORD.ATTEMPT\":\n                    State = StateFactory.toggleRecord(State);\n\n                    if (State.recordActive) {\n                        const {url} = payload;\n                        chrome.tabs.sendMessage(id, {\n                            type: \"RECORD.START\",\n                            payload: {url}\n                        }, onRecordDone.bind(null, id));\n                    } else {\n                        chrome.tabs.sendMessage(id, {type: \"RECORD.CANCEL\"}, onRecordCancel);\n                    }\n                    sendResponse({status: 1, state: {recordActive: State.recordActive}});\n                    break;\n                case \"AUTO_SAVE.STATUS\":\n                    chrome.storage.local.get([domain], result => {\n                        const domainState = result && result[domain] && JSON.parse(result[domain]) || null;\n                        if (domainState) {\n                            if (domainState._isPathEnoughToTrack === true) {\n                                // since it's true we can say that that domain items' path is enough to track items in this domain\n                                searchForEqualPathWatchedItem(domainState, url, similarURL => {\n                                    if (!similarURL) {\n                                        chrome.tabs.sendMessage(id, {\n                                            type: \"AUTO_SAVE.CHECK_STATUS\",\n                                            payload: {url, selection: State.selection}\n                                        }, onAutoSaveCheckStatus.bind(null, sendResponse));\n                                    } else {\n                                        sendResponse({status: -1});\n                                    }\n                                });\n                            } else {\n                                chrome.tabs.sendMessage(id, {\n                                    type: \"AUTO_SAVE.CHECK_STATUS\",\n                                    payload: {url, selection: State.selection}\n                                }, onAutoSaveCheckStatus.bind(null, sendResponse));\n                            }\n                        } else {\n                            // domain doesn't exist\n                            chrome.tabs.sendMessage(id, {\n                                type: \"AUTO_SAVE.CHECK_STATUS\",\n                                payload: {url, selection: State.selection}\n                            }, onAutoSaveCheckStatus.bind(null, sendResponse));\n                        }\n                    });\n                    return true;\n                case \"AUTO_SAVE.ATTEMPT\":\n                    if (State.autoSaveEnabled) {\n                        const {domain, currentURL: stateUrl, selection, price, faviconURL, faviconAlt, originalBackgroundColor} = State;\n\n                        canDisplayURLConfirmation(State, domain, canDisplay => {\n                            if (canDisplay) {\n                                onConfirmURLForCreateItemAttempt(id, domain, stateUrl, selection, price, faviconURL, faviconAlt, (canSave, useCaninocal) => {\n                                    if (canSave) {\n                                        const url = useCaninocal ? State.canonicalURL : State.browserURL;\n\n                                        checkForURLSimilarity(id, domain, url, (isToSave, autoSaveStatus) => {\n                                            if (isToSave) {\n                                                createItem(domain, url, selection, price, faviconURL, faviconAlt, [ITEM_STATUS.WATCHED], () => {\n                                                    chrome.tabs.sendMessage(id, {\n                                                        type: \"PRICE_TAG.HIGHLIGHT.STOP\",\n                                                        payload: {selection, originalBackgroundColor}\n                                                    }, onSimilarElementHighlight);\n\n                                                    updateExtensionAppearance(domain, url, true);\n                                                    State = StateFactory.disableAutoSave(State);\n\n                                                    sendResponse(false);\n                                                });\n                                            } else {\n                                                // For Exceptions (including when there's similar item - should be caught by \"AUTO_SAVE.STATUS\")\n                                                if (!autoSaveStatus) {\n                                                    State = StateFactory.disableAutoSave(State);\n                                                }\n                                            }\n                                        });\n                                    }\n                                });\n                            } else {\n                                checkForURLSimilarity(id, domain, stateUrl, isToSave => {\n                                    if (isToSave) {\n                                        createItem(domain, stateUrl, selection, price, faviconURL, faviconAlt, [ITEM_STATUS.WATCHED], () => {\n                                            chrome.tabs.sendMessage(id, {\n                                                type: \"PRICE_TAG.HIGHLIGHT.STOP\",\n                                                payload: {selection, originalBackgroundColor}\n                                            }, onSimilarElementHighlight);\n\n                                            updateExtensionAppearance(domain, stateUrl, true);\n                                            State = StateFactory.disableAutoSave(State);\n\n                                            sendResponse(false);\n                                        });\n                                    }\n                                });\n                            }\n                        });\n\n                        return true;\n                    } else {\n                        sendResponse(false);\n                    }\n                    break;\n                case \"AUTO_SAVE.HIGHLIGHT.PRE_START\":\n                    if (State.autoSaveEnabled) {\n                        const {selection} = State;\n                        chrome.tabs.sendMessage(id, {\n                            type: \"PRICE_TAG.HIGHLIGHT.START\",\n                            payload: {selection}\n                        }, onSimilarElementHighlight);\n                    }\n                    break;\n                case \"AUTO_SAVE.HIGHLIGHT.PRE_STOP\":\n                    if (State.autoSaveEnabled) {\n                        const {selection, originalBackgroundColor} = State;\n                        chrome.tabs.sendMessage(id, {\n                            type: \"PRICE_TAG.HIGHLIGHT.STOP\",\n                            payload: {selection, originalBackgroundColor}\n                        }, onSimilarElementHighlight);\n                    }\n                    break;\n                case \"PRICE_UPDATE.STATUS\":\n                    chrome.storage.local.get([State.domain], result => {\n                        const domainItems = result && result[State.domain] ? JSON.parse(result[State.domain]) : {};\n                        const item = domainItems[State.currentURL];\n                        if (item) {\n                            chrome.tabs.sendMessage(id, {\n                                type: \"PRICE_UPDATE.CHECK_STATUS\",\n                                payload: {selection: State.selection}\n                            }, onPriceUpdateCheckStatus.bind(null, sendResponse, item.price));\n                        } else {\n                            sendResponse(false);\n                        }\n                    });\n                    return true;\n                case \"PRICE_UPDATE.ATTEMPT\":\n                    if (State.isPriceUpdateEnabled) {\n                        const {domain, currentURL: stateUrl, selection, price: updatedPrice, originalBackgroundColor} = State;\n                        const price = updatedPrice && toPrice(updatedPrice);\n                        chrome.storage.local.get([domain], result => {\n                            const domainItems = result && result[domain] ? JSON.parse(result[domain]) : {};\n\n                            domainItems[stateUrl] = updateItemTrackStatus(domainItems[stateUrl], price,\n                                null,\n                                [\n                                    ITEM_STATUS.INCREASED, ITEM_STATUS.ACK_INCREASE,\n                                    ITEM_STATUS.DECREASED, ITEM_STATUS.INCREASED,\n                                    ITEM_STATUS.DECREASED, ITEM_STATUS.ACK_DECREASE,\n                                    ITEM_STATUS.DECREASED, ITEM_STATUS.DECREASED,\n                                    ITEM_STATUS.NOT_FOUND\n                                ]);\n                            domainItems[stateUrl] = updateItemDiffPercentage(domainItems[stateUrl]);\n\n                            chrome.storage.local.set({[domain]: JSON.stringify(domainItems)});\n\n                            chrome.tabs.sendMessage(id, {\n                                type: \"PRICE_TAG.HIGHLIGHT.STOP\",\n                                payload: {selection, originalBackgroundColor}\n                            }, onSimilarElementHighlight);\n\n                            State = StateFactory.disablePriceUpdate(State);\n                            sendResponse(false);\n                        });\n                    }\n                    return true;\n                case \"PRICE_UPDATE.HIGHLIGHT.PRE_START\":\n                    if (State.isPriceUpdateEnabled) {\n                        const {selection} = State;\n                        chrome.tabs.sendMessage(id, {\n                            type: \"PRICE_TAG.HIGHLIGHT.START\",\n                            payload: {selection}\n                        }, onSimilarElementHighlight);\n                    }\n                    break;\n                case \"PRICE_UPDATE.HIGHLIGHT.PRE_STOP\":\n                    if (State.isPriceUpdateEnabled) {\n                        const {selection, originalBackgroundColor} = State;\n                        chrome.tabs.sendMessage(id, {\n                            type: \"PRICE_TAG.HIGHLIGHT.STOP\",\n                            payload: {selection, originalBackgroundColor}\n                        }, onSimilarElementHighlight);\n                    }\n                    break;\n                case \"TRACKED_ITEMS.OPEN\":\n                    State = StateFactory.updateSortItemsBy(State, SORT_ITEMS_BY_TIME);\n                    isUndoStatusActive = State._undoRemovedItems.length > 0;\n                    sendResponse({isUndoStatusActive});\n                    break;\n                case \"TRACKED_ITEMS.GET\":\n                    getTrackedItemsSortedBy(State._sortItemsBy, sendResponse);\n                    return true;\n                case \"TRACKED_ITEMS.UNFOLLOW\":\n                    removeTrackedItem(itemUrl, State.currentURL, sendResponse);\n                    return true;\n                case \"TRACKED_ITEMS.CHANGE_SORT\":\n                    State = StateFactory.updateSortItemsBy(State, SORT_BY_TYPES[sortByType]);\n                    break;\n                case \"TRACKED_ITEMS.UNDO_ATTEMPT\":\n                    if (State._undoRemovedItems.length > 0) {\n                        const undoRemovedItem = StateFactory.getUndoRemovedItemsHead(State);\n\n                        undoRemoveTrackedItem(undoRemovedItem.url, State.currentURL, response => {\n                            if (response) {\n                                State = StateFactory.removeUndoRemovedItem(State);\n                                State._undoRemovedItems.length === 0 ?\n                                    sendResponse({isUndoStatusActive: false}) :\n                                    sendResponse({isUndoStatusActive: true});\n                            }\n                        });\n                        return true;\n                    } else {\n                        sendResponse({isUndoStatusActive: false})\n                    }\n                    break;\n            }\n        });\n\n    chrome.notifications.onClicked.addListener(notifId => {\n        chrome.tabs.create({url: State.notifications[notifId].url});\n        clearNotification(notifId);\n    });\n\n\n    // TODO: update and keep tracking\n    chrome.notifications.onButtonClicked.addListener((notifId, buttonIndex) => {\n        const {domain, url, type} = State.notifications[notifId];\n        switch (buttonIndex) {\n            case 0:\n                switch (type) {\n                    case ITEM_STATUS.DECREASED:\n                        chrome.storage.local.get([domain], result => {\n                            const domainItems = result && result[domain] ? JSON.parse(result[domain]) : {};\n                            if (domainItems[url]) {\n                                const {price: newPrice} = domainItems[url];\n                                domainItems[url] = updateItemTrackStatus(domainItems[url], newPrice, null, [ITEM_STATUS.DECREASED, ITEM_STATUS.ACK_DECREASE], true);\n                                chrome.storage.local.set({[domain]: JSON.stringify(domainItems)});\n                            }\n                        });\n                        break;\n                    case ITEM_STATUS.INCREASED:\n                        chrome.storage.local.get([domain], result => {\n                            const domainItems = result && result[domain] ? JSON.parse(result[domain]) : {};\n                            if (domainItems[url]) {\n                                const {previousPrice: priceBeforeIncreasing} = domainItems[url];\n                                domainItems[url] = updateItemTrackStatus(domainItems[url], priceBeforeIncreasing, null, [ITEM_STATUS.INCREASED, ITEM_STATUS.ACK_INCREASE], true);\n                                chrome.storage.local.set({[domain]: JSON.stringify(domainItems)});\n                            }\n                        });\n                        break;\n                }\n                break;\n            case 1:\n                switch (type) {\n                    case ITEM_STATUS.DECREASED, ITEM_STATUS.INCREASED:\n                        chrome.storage.local.get([domain], result => {\n                            const domainItems = result && result[domain] ? JSON.parse(result[domain]) : {};\n                            if (domainItems[url]) {\n                                domainItems[url] = updateItemTrackStatus(domainItems[url], null, null, ITEM_STATUS.ALL_STATUSES); // stop watching\n                                chrome.storage.local.set({[domain]: JSON.stringify(domainItems)});\n                            }\n                        });\n                        break;\n                }\n                break;\n        }\n    });\n\n    chrome.notifications.onClosed.addListener(clearNotification);\n}\n\nfunction setupSyncStorageState() {\n    syncStorageState();\n    setInterval(syncStorageState, SYNCHING_INTERVAL);\n}\n\nfunction bootstrap() {\n    setupSyncStorageState();\n    setupTrackingPolling();\n    attachEvents();\n}\n\nbootstrap();\n"],"names":["commonjsHelpers.commonjsGlobal","freeGlobal","Symbol","root","objectProto","nativeObjectToString","symToStringTag","getRawTag","objectToString","isObject","baseGetTag","coreJsData","funcProto","funcToString","hasOwnProperty","isMasked","isFunction","toSource","getValue","baseIsNative","getNative","nativeCreate","HASH_UNDEFINED","hashClear","hashDelete","hashGet","hashHas","hashSet","eq","assocIndexOf","listCacheClear","listCacheDelete","listCacheGet","listCacheHas","listCacheSet","Map","Hash","ListCache","isKeyable","getMapData","mapCacheClear","mapCacheDelete","mapCacheGet","mapCacheHas","mapCacheSet","MapCache","setCacheAdd","setCacheHas","strictIndexOf","baseFindIndex","baseIsNaN","baseIndexOf","Set","setToArray","noop","arrayIncludes","arrayIncludesWith","createSet","cacheHas","SetCache","baseUniq","TIME","CURRENT_PRICE","PRICE_CHECKING_INTERVAL","SYNCHING_INTERVAL","MAX_UNDO_REMOVED_ITEMS","UNDO_REMOVED_ITEMS_TIMEOUT","DEFAULT_TITLE","TRACKED_ITEM_TITLE","ITEM_STATUSES","WATCHED","NOT_FOUND","INCREASED","DECREASED","ACK_DECREASE","ACK_INCREASE","FIXED","ALL_STATUSES","Object","values","DEFAULT_ICON","TRACKED_ITEM_ICON","PRICE_UPDATE_ICON","PRICE_NOT_FOUND_ICON","PRICE_FIX_ICON","PRICE","HOSTNAME","DOMAIN","URL","CAPTURE","DOMAIN_IN_URL","HOSTNAME_AND_PATH","PROTOCOL_HOSTNAME_AND_PATH","setDefaultAppearance","chrome","browserAction","setTitle","title","setIcon","path","setTrackedItemAppearance","toPrice","price","priceNumber","parseFloat","replace","formattedPrice","toFixed","matchesHostnameAndPath","string","MATCHES","test","isCanonicalURLRelevant","canonical","matchesDomain","matchesHostname","matchesURL","parseDomainState","result","domain","JSON","parse","captureHostAndPathFromURL","url","captureHostAndPath","match","hostAndPath","captureProtocolHostAndPathFromURL","captureProtocolHostAndPath","protocolHostAndPath","filterAllTrackedItems","filteredResult","domainItems","StateFactory","createState","sortItemByType","recordActive","notifications","notificationsCounter","autoSaveEnabled","isPriceUpdateEnabled","selection","isSimilarElementHighlighted","originalBackgroundColor","isCurrentPageTracked","faviconURL","_faviconURLMap","currentURL","canonicalURL","browserURL","_sortItemsBy","_undoRemovedItems","_undoRemovedItemsResetTask","toggleRecord","state","disableRecord","updateCurrentDomain","updateCurrentURL","updateCanonicalURL","updateBrowserURL","enableCurrentPageTracked","disableCurrentPageTracked","updateFaviconURL","updateFaviconURLMapItem","tabId","enableAutoSave","disableAutoSave","enablePriceUpdate","disablePriceUpdate","setSelectionInfo","faviconAlt","setSimilarElementHighlight","incrementNotificationsCounter","deleteNotificationsItem","notificationId","newState","updateNotificationsItem","notificationState","updateSortItemsBy","addUndoRemovedItem","timestamp","maxItems","itemRef","_undoRemovedItemsClone","unshift","slice","getUndoRemovedItemsHead","removeUndoRemovedItem","shift","resetUndoRemovedItems","setUndoRemovedItemsResetTask","task","toStorageStateFormat","keys","reduce","stringify","syncStorageState","storage","local","get","localResult","localState","sync","syncResult","syncState","freshState","syncDomain","syncStateDomain","syncUrl","syncItem","assign","lastUpdateTimestamp","set","Item","constructor","previousPrice","statuses","diffPercentage","currentPrice","startingPrice","Date","getTime","updateCurrentPrice","newPrice","updateDiffPercentage","diff","Math","abs","diffPerc","ceil","floor","updateTrackStatus","statusesToAdd","statusesToRemove","forceStartingPrice","uniq","removeStatuses","length","filter","status","includes","isWatched","ITEM_STATUS","isNotFound","hasAcknowledgeDecrease","hasAcknowledgeIncrease","ItemFactory","createItem","createItemFromObject","sortItemsByTime","tsA","tsB","sortItemsByCurrentPrice","cpA","cpB","createHTMLTemplate","html","template","document","createElement","innerHTML","trim","content","getCanonicalPathFromSource","source","canonicalElement","querySelector","getAttribute","buildSaveConfirmationPayload","similarURL","message","buttons","buildURLConfirmationPayload","State","SORT_ITEMS_BY_TIME","item","updateItemDiffPercentage","updateItemTrackStatus","updatedItem","onConfirmURLForCreateItemAttempt","callback","modalElementId","tabs","sendMessage","type","payload","elementId","index","domainState","_canUseCanonical","onRecordDone","canDisplayURLConfirmation","canDisplay","canSave","useCaninocal","checkForURLSimilarity","isToSave","updateExtensionAppearance","onRecordCancel","onAutoSaveCheckStatus","sendResponse","onPriceUpdateCheckStatus","trackedPrice","onSimilarElementHighlight","isHighlighted","items","isUseCanonicalPrefUnset","undefined","checkForPriceChanges","targetPrice","onXHR","textContent","textContentMatch","createNotification","notificationOptions","push","e","console","warn","getTrackedItemsSortedBy","sortType","trackedItems","forEach","key","domainData","sortByFn","sortTrackedItemsBy","sort","removeTrackedItem","found","clearTimeout","removedItem","runtime","isUndoStatusActive","undoRemovedItemsTask","setTimeout","updateAutoSaveStatus","updatePriceUpdateStatus","undoRemoveTrackedItem","clearNotification","notifId","wasClosedByUser","clear","wasClickedByUser","iconUrl","contextMessage","extraOptions","options","requireInteraction","create","id","setupTrackingPolling","setInterval","fullURL","itemFallback","isItemDefinedAndWatched","urlFromDomain","exampleFromDomain","hasItemPriceIncOrDec","currentDomain","forcePageTrackingTo","itemObject","searchForEqualPathWatchedItem","currentHostAndPath","foundOne","_isPathEnoughToTrack","request","XMLHttpRequest","onload","response","open","send","onTabContextChange","captureDomain","protocolHostAndPathFromURL","canUseCanonical","attachEvents","onInstalled","addListener","log","onActivated","query","active","currentWindow","startsWith","onUpdated","favIconUrl","webNavigation","onCompleted","frameId","onHistoryStateUpdated","onMessage","sender","itemUrl","sortByType","bind","stateUrl","autoSaveStatus","updatedPrice","SORT_BY_TYPES","undoRemovedItem","onClicked","onButtonClicked","buttonIndex","priceBeforeIncreasing","onClosed","setupSyncStorageState","bootstrap"],"mappings":"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"}